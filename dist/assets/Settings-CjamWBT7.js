import{r as o,j as e,d as p}from"./index-IqRzlDru.js";import{m,v as g,n as y}from"./firebase-BZTKtPSO.js";const l={timezone:"America/New_York",darkMode:"system",dyslexiaFont:!1,notifications:!0};function k({user:a}){const[r,n]=o.useState(l),[c,h]=o.useState(""),[d,i]=o.useState(null);o.useEffect(()=>{async function t(){if(!a){n(l);return}const s=m(p,`users/${a.uid}/preferences/app`),f=await g(s);if(f.exists()){const u=f.data();n({...l,...u})}}t().catch(s=>{console.error(s),i("Failed to load preferences.")})},[a]);async function x(t){if(t.preventDefault(),!a){i("Sign in first.");return}try{const s=m(p,`users/${a.uid}/preferences/app`);await y(s,r,{merge:!0}),h("Preferences saved."),i(null)}catch(s){console.error(s),i(s?.message??"Failed to save preferences.")}}return a?e.jsx("div",{className:"fade-in",style:{display:"grid",gap:24},children:e.jsxs("section",{className:"glass-card",children:[e.jsx("div",{className:"badge",children:"Workspace preferences"}),e.jsx("h2",{style:{margin:"12px 0 6px",fontSize:28,fontWeight:800},children:"Workspace settings"}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:"pref-timezone",children:"Timezone"}),e.jsx("input",{id:"pref-timezone",name:"pref-timezone",value:r.timezone,onChange:t=>n(s=>({...s,timezone:t.target.value})),required:!0})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:"pref-dark-mode",children:"Appearance"}),e.jsxs("select",{id:"pref-dark-mode",name:"pref-dark-mode",value:r.darkMode,onChange:t=>n(s=>({...s,darkMode:t.target.value})),children:[e.jsx("option",{value:"system",children:"Follow system"}),e.jsx("option",{value:"light",children:"Light mode"}),e.jsx("option",{value:"dark",children:"Dark mode"})]})]}),e.jsxs("div",{className:"field",style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("input",{id:"pref-dyslexia-font",name:"pref-dyslexia-font",type:"checkbox",checked:r.dyslexiaFont,onChange:t=>n(s=>({...s,dyslexiaFont:t.target.checked}))}),e.jsx("label",{htmlFor:"pref-dyslexia-font",style:{margin:0},children:"Enable dyslexia-friendly font"})]}),e.jsxs("div",{className:"field",style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("input",{id:"pref-notifications",name:"pref-notifications",type:"checkbox",checked:r.notifications,onChange:t=>n(s=>({...s,notifications:t.target.checked}))}),e.jsx("label",{htmlFor:"pref-notifications",style:{margin:0},children:"Email notifications for Gemini insights"})]}),e.jsx("button",{type:"submit",className:"primary",children:"Save preferences"})]}),c&&e.jsx("p",{style:{marginTop:12,color:"var(--text-muted)"},children:c}),d&&e.jsx("p",{style:{marginTop:12,color:"#fecaca"},children:d})]})}):e.jsx("div",{className:"glass-card fade-in",children:e.jsx("h2",{style:{margin:0,fontSize:26,fontWeight:800},children:"Authenticate to personalize Synapse"})})}export{k as default};
