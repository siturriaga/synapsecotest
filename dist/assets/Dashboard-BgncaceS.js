import{r as l,j as e,d as m}from"./index-DXLrP2vc.js";import{h as R,j as x,q as f,k as v,l as b}from"./firebase-DnjqOjBc.js";const p=[{id:"sunrise",gradient:"linear-gradient(140deg, rgba(254,215,170,0.35), rgba(129,140,248,0.2))",caption:"Line up your goals while the day is fresh — Gemini is ready to draft supports.",greeting:"Good morning"},{id:"day",gradient:"linear-gradient(140deg, rgba(14,165,233,0.28), rgba(59,130,246,0.24))",caption:"Midday momentum keeps every learner on track with just-in-time insights.",greeting:"Good afternoon"},{id:"sunset",gradient:"linear-gradient(140deg, rgba(249,115,22,0.28), rgba(168,85,247,0.24))",caption:"Capture wins, gaps, and reassignment needs before the sun goes down.",greeting:"Good evening"},{id:"night",gradient:"linear-gradient(160deg, rgba(15,118,110,0.28), rgba(99,102,241,0.28))",caption:"Night mode engaged — prep tomorrow’s breakthroughs with calm clarity.",greeting:"Good night"}];function G(r){const n=r.getHours();return n<10?p[0]:n<16?p[1]:n<20?p[2]:p[3]}function I(){const[r,n]=l.useState(()=>new Date);l.useEffect(()=>{const h=window.setInterval(()=>{n(new Date)},6e4);return()=>window.clearInterval(h)},[]);const c=l.useMemo(()=>G(r),[r]),g=l.useMemo(()=>new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"2-digit"}).format(r),[r]),u=l.useMemo(()=>new Intl.DateTimeFormat(void 0,{weekday:"long",month:"long",day:"numeric"}).format(r),[r]);return e.jsxs("section",{className:"glass-card dynamic-welcome",style:{marginBottom:28,backgroundImage:c.gradient},children:[e.jsxs("div",{className:`welcome-orb ${c.id}`,"aria-hidden":!0,children:[e.jsx("div",{className:"welcome-orb__core"}),e.jsx("div",{className:"welcome-orb__trail"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Dynamic welcome"}),e.jsxs("h1",{style:{fontSize:34,margin:"12px 0 6px",fontWeight:800},children:[c.greeting,", educator."]}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:16,maxWidth:520},children:c.caption}),e.jsxs("div",{style:{display:"flex",gap:14,marginTop:16,alignItems:"center",color:"rgba(226,232,240,0.8)"},children:[e.jsx("span",{style:{fontSize:18,fontWeight:700},children:g}),e.jsx("span",{style:{opacity:.7},children:u})]})]})]})}function E({cards:r}){return e.jsx("div",{className:"card-grid card-grid-4",children:r.map(n=>e.jsxs("article",{className:"glass-card fade-in",children:[e.jsx("div",{style:{fontSize:13,letterSpacing:"0.08em",textTransform:"uppercase",color:"var(--text-muted)"},children:n.label}),e.jsx("div",{style:{fontSize:40,fontWeight:900,marginTop:12},children:n.displayValue??n.value}),n.delta&&e.jsx("div",{className:"tag",style:{marginTop:10},children:n.delta})]},n.id))})}function _({user:r,loading:n}){const[c,g]=l.useState([]),[u,h]=l.useState([]),[S,w]=l.useState([]),[d,j]=l.useState(null),[N,A]=l.useState([]);return l.useEffect(()=>{if(!r){g([]),h([]),w([]),A([]),j(null);return}const s=R(m,`users/${r.uid}/dashboard_stats/metrics`),D=x(s,o=>{const t=o.data()||{},i=[];if(typeof t.totalEnrollment=="number"&&i.push({id:"enrollment",label:"Learners scored",value:t.totalEnrollment}),t.latestAssessment){const a=t.latestAssessment;j(a);const y=a.averageScore??null;i.push({id:"latest-average",label:"Latest class average",value:y??0,displayValue:y!==null?y.toFixed(1):"—"}),typeof a.studentCount=="number"&&i.push({id:"latest-count",label:"Students assessed",value:a.studentCount})}else j(null);typeof t.groupCount=="number"&&i.push({id:"groups",label:"Active Groups",value:t.groupCount??0,delta:t.groupDelta??void 0}),typeof t.onTrack=="number"&&i.push({id:"on-track",label:"On Track",value:t.onTrack??0,delta:t.onTrackDelta??void 0}),typeof t.atRisk=="number"&&i.push({id:"at-risk",label:"Needs Support",value:t.atRisk??0,delta:t.atRiskDelta??void 0}),i.length===0&&i.push({id:"placeholder",label:"Data incoming",value:0,displayValue:"—"}),g(i)}),k=f(b(m,`users/${r.uid}/logs`),v("createdAt","desc")),T=x(k,o=>{const t=[];o.forEach(i=>{const a=i.data();t.push({id:i.id,title:a.title??"Insight",detail:a.detail??a.message??"Gemini generated an insight.",createdAt:a.createdAt?.toDate?.()??null})}),h(t.slice(0,5))}),W=f(b(m,`users/${r.uid}/assignments`),v("dueDate","asc")),z=x(W,o=>{const t=[];o.forEach(i=>{const a=i.data();t.push({id:i.id,title:a.title??"Untitled assignment",dueDate:a.dueDate,status:a.status??"draft"})}),w(t.slice(0,4))}),C=f(b(m,`users/${r.uid}/assessments_summary`),v("updatedAt","desc")),L=x(C,o=>{const t=[];o.forEach(i=>{const a=i.data();t.push({id:i.id,testName:a.testName??"Assessment",period:a.period,quarter:a.quarter,studentCount:a.studentCount,averageScore:a.averageScore,maxScore:a.maxScore,minScore:a.minScore,updatedAt:a.updatedAt?.toDate?.()??null})}),A(t.slice(0,3))});return()=>{D(),T(),z(),L()}},[r]),n?e.jsx("div",{className:"glass-card",children:"Loading your workspace…"}):r?e.jsxs("div",{className:"fade-in",children:[e.jsx(I,{}),e.jsxs("section",{style:{display:"grid",gap:28},children:[e.jsx(E,{cards:c}),d&&e.jsxs("section",{className:"glass-card",children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Latest mastery upload"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:d.testName})]}),d.period&&d.quarter&&e.jsxs("span",{className:"tag",children:["Period ",d.period," · ",d.quarter]})]}),e.jsx("div",{style:{display:"grid",gap:12,marginTop:18},children:e.jsxs("div",{style:{display:"flex",gap:18,flexWrap:"wrap"},children:[e.jsxs("div",{className:"glass-subcard",style:{padding:16,borderRadius:16,border:"1px solid rgba(148,163,184,0.25)",background:"rgba(15,23,42,0.55)"},children:[e.jsx("strong",{children:"Average"}),e.jsx("div",{style:{fontSize:26,fontWeight:700,marginTop:6},children:d.averageScore!==null&&d.averageScore!==void 0?d.averageScore.toFixed(1):"—"})]}),e.jsxs("div",{className:"glass-subcard",style:{padding:16,borderRadius:16,border:"1px solid rgba(148,163,184,0.25)",background:"rgba(15,23,42,0.55)"},children:[e.jsx("strong",{children:"Range"}),e.jsxs("div",{style:{marginTop:6},children:["High ",d.maxScore??"—"," · Low ",d.minScore??"—"]})]}),e.jsxs("div",{className:"glass-subcard",style:{padding:16,borderRadius:16,border:"1px solid rgba(148,163,184,0.25)",background:"rgba(15,23,42,0.55)"},children:[e.jsx("strong",{children:"Learners"}),e.jsx("div",{style:{fontSize:26,fontWeight:700,marginTop:6},children:d.studentCount??"—"})]})]})})]}),N.length>0&&e.jsxs("section",{className:"glass-card",children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Assessment history"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:"Recent uploads"})]}),e.jsx("a",{href:"/assignments",style:{color:"var(--accent)",fontWeight:600},children:"Design follow-ups →"})]}),e.jsxs("table",{className:"table",style:{marginTop:18},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Assessment"}),e.jsx("th",{children:"Period"}),e.jsx("th",{children:"Quarter"}),e.jsx("th",{children:"Avg"}),e.jsx("th",{children:"High"}),e.jsx("th",{children:"Low"}),e.jsx("th",{children:"Updated"})]})}),e.jsx("tbody",{children:N.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.testName}),e.jsx("td",{children:s.period??"—"}),e.jsx("td",{children:s.quarter??"—"}),e.jsx("td",{children:s.averageScore!==null&&s.averageScore!==void 0?s.averageScore.toFixed(1):"—"}),e.jsx("td",{children:s.maxScore??"—"}),e.jsx("td",{children:s.minScore??"—"}),e.jsx("td",{children:s.updatedAt?s.updatedAt.toLocaleString():"—"})]},s.id))})]})]}),e.jsxs("section",{className:"glass-card",children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Live oversight"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:"Pulse updates"})]}),e.jsx("a",{href:"/groups",style:{color:"var(--accent)",fontWeight:600},children:"Review groups →"})]}),u.length===0?e.jsx("div",{className:"empty-state",style:{marginTop:18},children:"No Gemini actions logged yet. Generate student groups or lessons to see reflective insights here."}):e.jsx("ul",{style:{listStyle:"none",padding:0,marginTop:22,display:"grid",gap:16},children:u.map(s=>e.jsxs("li",{style:{border:"1px solid rgba(148,163,184,0.2)",borderRadius:14,padding:16},children:[e.jsx("div",{style:{fontWeight:600},children:s.title}),e.jsx("div",{style:{color:"var(--text-muted)",marginTop:4},children:s.detail}),s.createdAt&&e.jsx("div",{style:{fontSize:12,marginTop:10,color:"rgba(148,163,184,0.7)"},children:s.createdAt.toLocaleString()})]},s.id))})]}),e.jsxs("section",{className:"glass-card",children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Upcoming"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:"Assignments radar"})]}),e.jsx("a",{href:"/assignments",style:{color:"var(--accent)",fontWeight:600},children:"Manage assignments →"})]}),S.length===0?e.jsx("div",{className:"empty-state",style:{marginTop:18},children:"Create differentiated assignments from any standard to monitor mastery progress here."}):e.jsxs("table",{className:"table",style:{marginTop:18},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Assignment"}),e.jsx("th",{children:"Due date"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:S.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.title}),e.jsx("td",{children:s.dueDate?new Date(s.dueDate).toLocaleDateString():"No due date"}),e.jsx("td",{style:{textTransform:"capitalize"},children:s.status})]},s.id))})]})]})]})]}):e.jsxs("div",{className:"glass-card fade-in",children:[e.jsx("h2",{style:{fontSize:28,margin:"0 0 12px",fontWeight:800},children:"Authenticate to launch Synapse"}),e.jsx("p",{style:{color:"var(--text-muted)",maxWidth:520},children:"Sign in with your Google Workspace educator account to unlock roster uploads, Gemini-powered grouping, and live mastery analytics."})]})}export{_ as default};
