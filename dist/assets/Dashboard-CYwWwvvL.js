import{j as e,r as l,d as c}from"./index-keyQ7pV2.js";import{h as T,j as g,q as y,k as f,l as j}from"./firebase-DnjqOjBc.js";const o=[{id:"sunrise",gradient:"linear-gradient(140deg, rgba(99,102,241,0.35), rgba(14,165,233,0.2))",caption:"Sunrise sync — line up your day with clarity."},{id:"day",gradient:"linear-gradient(140deg, rgba(14,165,233,0.28), rgba(59,130,246,0.24))",caption:"Midday momentum — keep every learner on track."},{id:"sunset",gradient:"linear-gradient(140deg, rgba(249,115,22,0.28), rgba(168,85,247,0.24))",caption:"Sunset reflections — capture progress effortlessly."},{id:"night",gradient:"linear-gradient(160deg, rgba(15,118,110,0.28), rgba(99,102,241,0.28))",caption:"Evening planning — design tomorrow’s breakthroughs."}];function w(){const t=new Date().getHours();return t<10?o[0]:t<16?o[1]:t<20?o[2]:o[3]}function W(){const t=w();return e.jsxs("section",{className:"glass-card",style:{marginBottom:28,backgroundImage:t.gradient},children:[e.jsx("div",{className:"badge",children:"Dynamic welcome"}),e.jsx("h1",{style:{fontSize:34,margin:"12px 0 6px",fontWeight:800},children:"Your co-pilot for standards-aligned mastery"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:16,maxWidth:520},children:t.caption})]})}function A({cards:t}){return e.jsx("div",{className:"card-grid card-grid-4",children:t.map(i=>e.jsxs("article",{className:"glass-card fade-in",children:[e.jsx("div",{style:{fontSize:13,letterSpacing:"0.08em",textTransform:"uppercase",color:"var(--text-muted)"},children:i.label}),e.jsx("div",{style:{fontSize:40,fontWeight:900,marginTop:12},children:i.value}),i.delta&&e.jsx("div",{className:"tag",style:{marginTop:10},children:i.delta})]},i.id))})}function G({user:t,loading:i}){const[v,u]=l.useState([]),[h,m]=l.useState([]),[p,x]=l.useState([]);return l.useEffect(()=>{if(!t){u([]),m([]),x([]);return}const s=T(c,`users/${t.uid}/dashboard_stats/metrics`),b=g(s,d=>{const a=d.data()||{},r=[{id:"enrollment",label:"Total Enrollment",value:a.totalEnrollment??0},{id:"groups",label:"Active Groups",value:a.groupCount??0,delta:a.groupDelta??void 0},{id:"on-track",label:"On Track",value:a.onTrack??0,delta:a.onTrackDelta??void 0},{id:"at-risk",label:"Needs Support",value:a.atRisk??0,delta:a.atRiskDelta??void 0}];u(r)}),S=y(j(c,`users/${t.uid}/logs`),f("createdAt","desc")),N=g(S,d=>{const a=[];d.forEach(r=>{const n=r.data();a.push({id:r.id,title:n.title??"Insight",detail:n.detail??n.message??"Gemini generated an insight.",createdAt:n.createdAt?.toDate?.()??null})}),m(a.slice(0,5))}),D=y(j(c,`users/${t.uid}/assignments`),f("dueDate","asc")),k=g(D,d=>{const a=[];d.forEach(r=>{const n=r.data();a.push({id:r.id,title:n.title??"Untitled assignment",dueDate:n.dueDate,status:n.status??"draft"})}),x(a.slice(0,4))});return()=>{b(),N(),k()}},[t]),i?e.jsx("div",{className:"glass-card",children:"Loading your workspace…"}):t?e.jsxs("div",{className:"fade-in",children:[e.jsx(W,{}),e.jsxs("section",{style:{display:"grid",gap:28},children:[e.jsx(A,{cards:v}),e.jsxs("section",{className:"glass-card",children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Live oversight"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:"Pulse updates"})]}),e.jsx("a",{href:"/groups",style:{color:"var(--accent)",fontWeight:600},children:"Review groups →"})]}),h.length===0?e.jsx("div",{className:"empty-state",style:{marginTop:18},children:"No Gemini actions logged yet. Generate student groups or lessons to see reflective insights here."}):e.jsx("ul",{style:{listStyle:"none",padding:0,marginTop:22,display:"grid",gap:16},children:h.map(s=>e.jsxs("li",{style:{border:"1px solid rgba(148,163,184,0.2)",borderRadius:14,padding:16},children:[e.jsx("div",{style:{fontWeight:600},children:s.title}),e.jsx("div",{style:{color:"var(--text-muted)",marginTop:4},children:s.detail}),s.createdAt&&e.jsx("div",{style:{fontSize:12,marginTop:10,color:"rgba(148,163,184,0.7)"},children:s.createdAt.toLocaleString()})]},s.id))})]}),e.jsxs("section",{className:"glass-card",children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Upcoming"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:"Assignments radar"})]}),e.jsx("a",{href:"/assignments",style:{color:"var(--accent)",fontWeight:600},children:"Manage assignments →"})]}),p.length===0?e.jsx("div",{className:"empty-state",style:{marginTop:18},children:"Create differentiated assignments from any standard to monitor mastery progress here."}):e.jsxs("table",{className:"table",style:{marginTop:18},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Assignment"}),e.jsx("th",{children:"Due date"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:p.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.title}),e.jsx("td",{children:s.dueDate?new Date(s.dueDate).toLocaleDateString():"No due date"}),e.jsx("td",{style:{textTransform:"capitalize"},children:s.status})]},s.id))})]})]})]})]}):e.jsxs("div",{className:"glass-card fade-in",children:[e.jsx("h2",{style:{fontSize:28,margin:"0 0 12px",fontWeight:800},children:"Authenticate to launch Synapse"}),e.jsx("p",{style:{color:"var(--text-muted)",maxWidth:520},children:"Sign in with your Google Workspace educator account to unlock roster uploads, Gemini-powered grouping, and live mastery analytics."})]})}export{G as default};
