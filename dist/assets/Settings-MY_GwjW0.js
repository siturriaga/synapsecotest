import{r as l,D as b,j as e,d as m,s as f}from"./index-DOmTO72t.js";import{h as u,n as C,p as k}from"./firebase-HdBvgX-e.js";const h=()=>({...b}),o=[{value:"aurora",label:"Aurora waves",description:"Flowing gradients that pulse softly behind each workspace."},{value:"orbs",label:"Floating orbs",description:"Layered light orbs with gentle motion for a cinematic feel."},{value:"grid",label:"Futuristic grid",description:"Subtle tech grid with premium bloom accents."},{value:"minimal",label:"Minimal",description:"Tone the background down for focused planning sessions."}];function N({user:i}){const[t,s]=l.useState(()=>h()),[d,x]=l.useState(""),[p,c]=l.useState(null),g=l.useMemo(()=>t.accentColor.toUpperCase(),[t.accentColor]),v=l.useMemo(()=>t.surfaceColor.toUpperCase(),[t.surfaceColor]),y=l.useMemo(()=>o.find(r=>r.value===t.texture)??o[0],[t.texture]);l.useEffect(()=>{async function r(){if(!i){s(h());return}const a=u(m,`users/${i.uid}/preferences/app`),n=await C(a);s(f(n.exists()?n.data():void 0))}r().catch(a=>{console.error(a),c("Failed to load preferences.")})},[i]);async function j(r){if(r.preventDefault(),!i){c("Sign in first.");return}try{const a=u(m,`users/${i.uid}/preferences/app`),n=f(t);await k(a,n,{merge:!0}),s(n),x("Preferences saved."),c(null)}catch(a){console.error(a),c(a?.message??"Failed to save preferences.")}}return i?e.jsx("div",{className:"fade-in",style:{display:"grid",gap:24},children:e.jsxs("section",{className:"glass-card",children:[e.jsx("h2",{style:{margin:"4px 0 6px",fontSize:28,fontWeight:800},children:"Workspace settings"}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:"pref-timezone",children:"Timezone"}),e.jsx("input",{id:"pref-timezone",name:"pref-timezone",value:t.timezone,onChange:r=>s(a=>({...a,timezone:r.target.value})),required:!0})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:"pref-display-name",children:"Preferred welcome name"}),e.jsx("input",{id:"pref-display-name",name:"pref-display-name",value:t.displayNameOverride??"",placeholder:"Use your email-based name",onChange:r=>s(a=>{const n=r.target.value.trim();return{...a,displayNameOverride:n||null}})}),e.jsx("small",{style:{color:"var(--text-muted)"},children:"Leave blank to auto-derive from your Google account email."})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:"pref-dark-mode",children:"Appearance"}),e.jsxs("select",{id:"pref-dark-mode",name:"pref-dark-mode",value:t.darkMode,onChange:r=>s(a=>({...a,darkMode:r.target.value})),children:[e.jsx("option",{value:"system",children:"Follow system"}),e.jsx("option",{value:"light",children:"Light mode"}),e.jsx("option",{value:"dark",children:"Dark mode"})]})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:"pref-accent",children:"Accent color"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("input",{id:"pref-accent",name:"pref-accent",type:"color",value:t.accentColor,onChange:r=>s(a=>({...a,accentColor:r.target.value}))}),e.jsx("span",{style:{fontSize:13,letterSpacing:.08,textTransform:"uppercase",color:"var(--text-muted)"},children:g})]})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:"pref-surface",children:"Canvas tone"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("input",{id:"pref-surface",name:"pref-surface",type:"color",value:t.surfaceColor,onChange:r=>s(a=>({...a,surfaceColor:r.target.value}))}),e.jsx("span",{style:{fontSize:13,letterSpacing:.08,textTransform:"uppercase",color:"var(--text-muted)"},children:v})]})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:"pref-texture",children:"Interface texture"}),e.jsx("select",{id:"pref-texture",name:"pref-texture",value:t.texture,onChange:r=>s(a=>({...a,texture:r.target.value})),children:o.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))}),e.jsx("small",{style:{color:"var(--text-muted)"},children:y.description})]}),e.jsxs("div",{className:"field",style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("input",{id:"pref-dyslexia-font",name:"pref-dyslexia-font",type:"checkbox",checked:t.dyslexiaFont,onChange:r=>s(a=>({...a,dyslexiaFont:r.target.checked}))}),e.jsx("label",{htmlFor:"pref-dyslexia-font",style:{margin:0},children:"Enable dyslexia-friendly font"})]}),e.jsxs("div",{className:"field",style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("input",{id:"pref-micro",name:"pref-micro",type:"checkbox",checked:t.microInteractions,onChange:r=>s(a=>({...a,microInteractions:r.target.checked}))}),e.jsx("label",{htmlFor:"pref-micro",style:{margin:0},children:"Enable premium micro-interactions"})]}),e.jsxs("div",{className:"field",style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("input",{id:"pref-notifications",name:"pref-notifications",type:"checkbox",checked:t.notifications,onChange:r=>s(a=>({...a,notifications:r.target.checked}))}),e.jsx("label",{htmlFor:"pref-notifications",style:{margin:0},children:"Email notifications for Gemini insights"})]}),e.jsx("button",{type:"submit",className:"primary",children:"Save preferences"})]}),d&&e.jsx("p",{style:{marginTop:12,color:"var(--text-muted)"},children:d}),p&&e.jsx("p",{style:{marginTop:12,color:"#fecaca"},children:p})]})}):e.jsx("div",{className:"glass-card fade-in",children:e.jsx("h2",{style:{margin:0,fontSize:26,fontWeight:800},children:"Authenticate to personalize Synapse"})})}export{N as default};
