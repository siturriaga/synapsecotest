import{r as a,u as Je,j as e,d as B,a as Xe}from"./index-CzdKedfN.js";import{h as ie,t as et,m as ye,u as tt,w as st,j as he,q as ze,k as Re}from"./firebase-HdBvgX-e.js";const ae=[{id:"sunrise",gradient:"linear-gradient(140deg, rgba(254,215,170,0.35), rgba(129,140,248,0.2))",caption:"Line up your goals while the day is fresh â€” Gemini is ready to draft supports.",greeting:"Good morning",icon:"ğŸŒ…",iconColor:"#fbbf24"},{id:"day",gradient:"linear-gradient(140deg, rgba(14,165,233,0.28), rgba(59,130,246,0.24))",caption:"Midday momentum keeps every learner on track with just-in-time insights.",greeting:"Good afternoon",icon:"â˜€ï¸",iconColor:"#fde68a"},{id:"sunset",gradient:"linear-gradient(140deg, rgba(249,115,22,0.28), rgba(168,85,247,0.24))",caption:"Capture wins, gaps, and reassignment needs before the sun goes down.",greeting:"Good evening",icon:"ğŸŒ‡",iconColor:"#fb923c"},{id:"night",gradient:"linear-gradient(160deg, rgba(15,118,110,0.28), rgba(99,102,241,0.28))",caption:"Night mode engaged â€” prep tomorrowâ€™s breakthroughs with calm clarity.",greeting:"Good night",icon:"ğŸŒ™",iconColor:"#a5b4fc"}];function rt(s){const n=s.getHours();return n<10?ae[0]:n<16?ae[1]:n<20?ae[2]:ae[3]}function at(s){return(s.getHours()*60+s.getMinutes()+s.getSeconds()/60)/1440*360}function nt(){const[s,n]=a.useState(()=>new Date),{displayName:o}=Je();a.useEffect(()=>{const c=window.setInterval(()=>{n(new Date)},1e3);return()=>window.clearInterval(c)},[]);const i=a.useMemo(()=>rt(s),[s]),l=a.useMemo(()=>{const c=at(s),C=s.getSeconds()/60;return c+Math.sin(C*2*Math.PI)*6},[s]),u=a.useMemo(()=>({"--welcome-rotation":`${l}deg`}),[l]),m=a.useMemo(()=>new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"2-digit"}).format(s),[s]),b=a.useMemo(()=>new Intl.DateTimeFormat(void 0,{weekday:"long",month:"long",day:"numeric"}).format(s),[s]);return e.jsxs("section",{className:`glass-card dynamic-welcome ${i.id}`,style:{marginBottom:32,backgroundImage:i.gradient,position:"sticky",top:32,zIndex:5},children:[e.jsxs("div",{className:"welcome-backdrop","aria-hidden":!0,children:[e.jsx("span",{className:"welcome-particle"}),e.jsx("span",{className:"welcome-particle"}),e.jsx("span",{className:"welcome-particle"})]}),e.jsxs("div",{className:`welcome-orb ${i.id}`,"aria-hidden":!0,style:u,children:[e.jsx("div",{className:"welcome-orb__glow"}),e.jsx("div",{className:"welcome-orb__core"}),e.jsx("div",{className:"welcome-orb__trail"}),e.jsx("div",{className:"welcome-orb__celestial",style:{color:i.iconColor},children:e.jsx("span",{children:i.icon})})]}),e.jsxs("div",{className:"welcome-content",children:[e.jsx("div",{className:"badge",children:"Workspace welcome"}),e.jsxs("h1",{className:"welcome-title",children:[i.greeting,o?`, ${o}`:", educator","."]}),e.jsx("p",{className:"welcome-caption",children:i.caption}),e.jsxs("div",{className:"welcome-meta",children:[e.jsxs("div",{children:[e.jsx("span",{className:"welcome-meta__label",children:"Current time"}),e.jsx("div",{className:"welcome-meta__value",children:m})]}),e.jsxs("div",{children:[e.jsx("span",{className:"welcome-meta__label",children:"Today"}),e.jsx("div",{className:"welcome-meta__value",children:b})]})]})]})]})}const De=[{background:"linear-gradient(135deg, rgba(59,130,246,0.55), rgba(14,116,144,0.48))",border:"rgba(96,165,250,0.75)",accent:"rgba(226,245,255,0.94)",glow:"0 24px 45px rgba(14,116,144,0.35)"},{background:"linear-gradient(135deg, rgba(110,231,183,0.55), rgba(16,185,129,0.45))",border:"rgba(45,212,191,0.75)",accent:"rgba(236,253,245,0.94)",glow:"0 24px 45px rgba(16,185,129,0.28)"},{background:"linear-gradient(135deg, rgba(244,114,182,0.55), rgba(251,191,36,0.45))",border:"rgba(244,114,182,0.72)",accent:"rgba(255,241,242,0.94)",glow:"0 24px 45px rgba(236,72,153,0.28)"},{background:"linear-gradient(135deg, rgba(192,132,252,0.55), rgba(79,70,229,0.45))",border:"rgba(167,139,250,0.75)",accent:"rgba(237,233,254,0.94)",glow:"0 24px 45px rgba(124,58,237,0.32)"}];function it({cards:s}){return e.jsx("div",{className:"card-grid card-grid-4",children:s.map((n,o)=>{const i=De[o%De.length];return e.jsxs("article",{className:"glass-card fade-in",style:{background:i.background,borderColor:i.border,color:i.accent,boxShadow:i.glow,backdropFilter:"blur(24px)",transform:"translateY(0)",transition:"transform 220ms ease, box-shadow 220ms ease"},onMouseEnter:l=>{l.currentTarget.style.transform="translateY(-6px)",l.currentTarget.style.boxShadow="0 32px 70px rgba(15,23,42,0.45)"},onMouseLeave:l=>{l.currentTarget.style.transform="translateY(0)",l.currentTarget.style.boxShadow=i.glow},children:[e.jsx("div",{style:{fontSize:13,letterSpacing:"0.08em",textTransform:"uppercase",opacity:.85},children:n.label}),e.jsx("div",{style:{fontSize:40,fontWeight:900,marginTop:12},children:n.displayValue??n.value}),n.delta&&e.jsx("div",{className:"tag",style:{marginTop:10,background:"rgba(15, 23, 42, 0.25)",border:"1px solid rgba(255,255,255,0.22)"},children:n.delta})]},n.id)})})}function lt(s,n){if(typeof window>"u")return;const o=document.getElementById(s);if(!o){window.print();return}const i=window.open("","_blank","noopener,noreferrer,width=900,height=650");if(!i){window.print();return}const l=o.cloneNode(!0),u=Array.from(document.head.querySelectorAll('style, link[rel="stylesheet"]')).map(c=>c.outerHTML).join(`
`),m=Object.entries(document.body.dataset).map(([c,C])=>`data-${c}="${C??""}"`).join(" "),b=m?` ${m}`:"";i.document.open(),i.document.write(`<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>${n??document.title}</title>
${u}
<style>
  @media print {
    body { margin: 24px; }
  }
</style>
</head>
<body${b}>
<div class="print-container">${l.outerHTML}</div>
</body>
</html>`),i.document.close(),i.focus(),i.print(),i.close()}function K({targetId:s,label:n="Print section",title:o}){const i=a.useCallback(()=>{lt(s,o)},[s,o]);return e.jsxs("button",{type:"button",onClick:i,className:"print-button","aria-label":n,title:n,children:[e.jsx("span",{className:"print-button__icon","aria-hidden":"true",children:"ğŸ–¨ï¸"}),e.jsx("span",{className:"print-button__label",children:"Print"})]})}const ot=[{id:"approaching",label:"Approaching",description:"Below 50% â€” intensive reteach needed",color:"#fda4af",background:"linear-gradient(90deg, rgba(248, 113, 113, 0.38), rgba(244, 114, 182, 0.28))"},{id:"developing",label:"Developing",description:"50-69% â€” targeted scaffolds",color:"#fcd34d",background:"linear-gradient(90deg, rgba(251, 191, 36, 0.38), rgba(250, 204, 21, 0.22))"},{id:"onGrade",label:"On Grade",description:"70-89% â€” on grade level",color:"#4ade80",background:"linear-gradient(90deg, rgba(74, 222, 128, 0.38), rgba(16, 185, 129, 0.26))"},{id:"mastered",label:"Mastered",description:"90%+ â€” enrichment ready",color:"#60a5fa",background:"linear-gradient(90deg, rgba(96, 165, 250, 0.38), rgba(129, 140, 248, 0.26))"}];function We(s,n){return n?Math.round(s/n*100):0}function dt(s){if(s===null||Number.isNaN(s))return"N/A";const n=Number(s.toFixed(1));return Number.isInteger(n)?`${Math.round(n)}%`:`${n.toFixed(1)}%`}function ct({scopes:s,sectionId:n="mastery-distribution",headerExtras:o}){const i=a.useMemo(()=>s.filter(l=>l.summary),[s]);return i.length?e.jsxs("section",{id:n,className:"glass-card",style:{display:"grid",gap:20},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:16,flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Proficiency distribution"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:"Track mastery momentum"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap",maxWidth:520},children:[o,e.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"These visuals reflect the most recent score for each learner. Missing scores remain flexible â€” they stay in the roster as N/A so uploads never block your workflow."}),e.jsx(K,{targetId:n,label:"Print mastery distribution"})]})]}),e.jsx("div",{style:{display:"grid",gap:18,gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))"},children:i.map(l=>{const{summary:u}=l;if(!u)return null;const m=[],b=We(u.counts.mastered+u.counts.onGrade,u.scoredLearners),c=u.scoredLearners>0?u.scoredLearners:"N/A",C=u.totalLearners>0?u.totalLearners:"N/A",w=u.scoredLearners>0;if(u.scoredLearners&&(b>=80?m.push("Strong mastery trend â€” celebrate and extend learning!"):b>=60?m.push("Solid footing â€” keep reinforcing core concepts to lift more learners."):m.push("Reinforce foundations â€” focus reteach groups and formative checks.")),l.trendDelta!=null&&!Number.isNaN(l.trendDelta)){const f=l.trendDelta>0?`â–²${l.trendDelta.toFixed(1)} pts`:`â–¼${Math.abs(l.trendDelta).toFixed(1)} pts`;m.push(`Latest shift: ${f}`)}return e.jsxs("article",{className:"glass-subcard",style:{border:"1px solid rgba(148,163,184,0.35)",borderRadius:18,padding:20,display:"grid",gap:14,background:"linear-gradient(135deg, rgba(15,23,42,0.72), rgba(30,64,175,0.25))",boxShadow:"0 28px 60px rgba(15,23,42,0.45)"},children:[e.jsxs("header",{style:{display:"grid",gap:4},children:[e.jsx("strong",{style:{fontSize:18},children:l.title}),e.jsx("span",{style:{color:"var(--text-muted)",fontSize:13},children:l.subtitle})]}),e.jsxs("div",{style:{display:"flex",gap:18,alignItems:"baseline",flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:30,fontWeight:700},children:dt(u.average)}),e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)"},children:"Average proficiency"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:24,fontWeight:700},children:c}),e.jsxs("div",{style:{fontSize:13,color:"var(--text-muted)"},children:["Scored / ",C]})]}),l.latestScore!==void 0&&l.latestScore!==null&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:24,fontWeight:700},children:[l.latestScore.toFixed(1),"%"]}),e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)"},children:l.latestAssessment??"Latest score"})]})]}),e.jsx("div",{style:{display:"grid",gap:10},children:ot.map(f=>{const h=u.counts[f.id],x=We(h,u.scoredLearners);return e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"var(--text-muted)"},children:[e.jsxs("span",{children:[f.label," Â· ",f.description]}),e.jsx("span",{children:w?e.jsxs(e.Fragment,{children:[h,` Â· ${x}%`]}):"N/A"})]}),e.jsx("div",{style:{height:10,borderRadius:999,background:"rgba(148,163,184,0.16)",overflow:"hidden"},children:e.jsx("div",{style:{width:`${x}%`,height:"100%",transition:"width 320ms ease",background:f.background,boxShadow:`0 0 12px ${f.color}`}})})]},f.id)})}),m.length>0&&e.jsx("p",{style:{margin:0,fontSize:13,color:"rgba(226,232,240,0.78)"},children:m.join(" ")})]},l.id)})})]}):e.jsxs("section",{id:n,className:"glass-card",style:{display:"grid",gap:16},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Proficiency distribution"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:"Mastery data"})]}),e.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[o,e.jsx(K,{targetId:n,label:"Print mastery distribution"})]})]}),e.jsxs("article",{className:"glass-subcard",style:{border:"1px solid rgba(148,163,184,0.35)",borderRadius:16,padding:18,background:"rgba(15,23,42,0.62)"},children:[e.jsx("strong",{style:{fontSize:18,display:"block",marginBottom:6},children:"Mastery data"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Proficiency metrics are currently N/A. Upload data when you have it, but your workflow stays flexible in the meantime."})]})]})}function fe(s){const n=s.length,o={approaching:0,developing:0,onGrade:0,mastered:0},i=[];s.forEach(m=>{typeof m=="number"&&Number.isFinite(m)&&(i.push(m),m>=90?o.mastered+=1:m>=70?o.onGrade+=1:m>=50?o.developing+=1:o.approaching+=1)});const l=i.length,u=l?i.reduce((m,b)=>m+b,0)/l:null;return{totalLearners:n,scoredLearners:l,average:u,counts:o}}function ut(s){if(!s.length)return null;const n=s.filter(l=>typeof l.score=="number");if(n.length<2)return null;const o=n[0].score,i=n[1].score;return o-i}function Pe(s){return s.toLowerCase().replace(/\s+/g," ").trim()}function mt({student:s,history:n,classAverage:o,trendDelta:i,groupInsights:l,pedagogy:u}){if(!s)return null;const m=n[0]??null,b=typeof m?.score=="number"?m.score:s.lastScore,c=m?.testName??s.lastAssessment,C=[];if(typeof b=="number"){const p=b.toFixed(1).replace(/\.0$/,""),W=c?` on ${c}`:"";if(C.push(`${s.displayName} is working at ${p}%${W}.`),typeof o=="number"){const j=b-o,E=j>0?"above":j<0?"below":"right on",R=Math.abs(j).toFixed(1).replace(/\.0$/,"");j!==0?C.push(`That is ${R} pts ${E} the class average of ${o.toFixed(1)}%.`):C.push("That matches the current class average.")}}else C.push(`${s.displayName} does not have a recent scored assessment yet. Capture the next checkpoint to personalise support.`);if(typeof i=="number"&&!Number.isNaN(i)&&i!==0){const p=i>0?`â–²${i.toFixed(1)} pts momentum`:`â–¼${Math.abs(i).toFixed(1)} pts dip`;C.push(`Recent trajectory shows ${p} across the last two assessments.`)}const w=[];n.slice(0,3).forEach(p=>{const W=p.createdAt?p.createdAt.toLocaleDateString():"Recent",j=typeof p.score=="number"?`${p.score.toFixed(1).replace(/\.0$/,"")}%`:"N/A",E=p.testName??"Assessment";w.push(`${E} (${W}): ${j}`)}),!w.length&&typeof b=="number"&&w.push(`Latest recorded score: ${b.toFixed(1).replace(/\.0$/,"")}%`);const f=[],h=new Set([s.displayName,...s.nameVariants??[]].map(Pe)),x=l.find(p=>p.students.some(W=>h.has(Pe(W.name))));if(x){const p=x.recommendedPractices[0];f.push(`${s.displayName} is in the ${x.label.toLowerCase()} cohort (${x.range}). ${p??"Focus on targeted feedback and collaborative routines."}`)}return u?.bestPractices?.length&&u.bestPractices.slice(0,2).forEach(p=>{f.push(p)}),f.length||f.push("Celebrate strengths during conferences and co-design the next learning target together."),{headline:C.join(" "),highlights:w,recommendations:f}}function xe({data:s,stroke:n="rgba(94,234,212,0.9)",fill:o="rgba(94,234,212,0.25)"}){const i=a.useId();if(!s.length)return e.jsx("div",{style:{fontSize:12,color:"var(--text-muted)"},children:"No trend data"});const l=s.map(x=>typeof x.value=="number"?x.value:null),u=l.filter(x=>x!==null);if(!u.length)return e.jsx("div",{style:{fontSize:12,color:"var(--text-muted)"},children:"No scored trend"});const m=Math.min(...u),c=Math.max(...u)-m||1,C=l.map((x,p)=>{const W=p/Math.max(1,s.length-1)*100,j=x===null?null:100-(x-m)/c*100;return{x:W,y:j}});let w=!0;const f=C.map(x=>{if(x.y===null)return"";const p=w?"M":"L";return w=!1,`${p}${x.x},${x.y}`}).filter(Boolean).join(" "),h=f?`${f} L100,100 L0,100 Z`:"";return e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{width:"100%",height:90},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`${i}-sparkline`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:o,stopOpacity:.9}),e.jsx("stop",{offset:"100%",stopColor:o,stopOpacity:.1})]})}),h&&e.jsx("path",{d:h,fill:`url(#${i}-sparkline)`,stroke:"none",opacity:.8}),f&&e.jsx("path",{d:f,fill:"none",stroke:n,strokeWidth:2.5,strokeLinecap:"round"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"var(--text-muted)"},children:[e.jsx("span",{children:s[0]?.label}),e.jsx("span",{children:s[s.length-1]?.label})]})]})}function U({label:s,onClear:n,tone:o="section"}){const[i,l]=a.useState(!1),u=async()=>{if(!(i||!window.confirm("Are you sure you want to clear this data? This action cannot be undone.")))try{l(!0),await n()}finally{l(!1)}},m=o==="danger"?"rgba(248,113,113,0.18)":"rgba(94,234,212,0.16)",b=o==="danger"?"rgba(248,113,113,0.6)":"rgba(94,234,212,0.45)",c=o==="danger"?"rgba(254,226,226,0.92)":"rgba(204,251,241,0.92)";return e.jsx("button",{type:"button",className:"clear-button",onClick:u,disabled:i,style:{display:"inline-flex",alignItems:"center",gap:8,padding:"6px 14px",borderRadius:999,border:`1px solid ${b}`,background:m,color:c,fontSize:13,textTransform:"uppercase",letterSpacing:"0.08em",cursor:i?"not-allowed":"pointer",opacity:i?.6:1},children:i?"Clearingâ€¦":s})}async function Q(s,n=B){const o=ye(n,s),i=await tt(o);if(i.empty)return;const l=st(n);i.docs.forEach(u=>{l.delete(u.ref)}),await l.commit()}async function be(s){try{await et(s)}catch(n){console.error("Failed to delete document",s.path,n)}}async function Ie(s){await be(ie(B,`users/${s}/dashboard_stats/metrics`))}async function gt(s){await Q(`users/${s}/logs`)}async function Ee(s){await Q(`users/${s}/assignments`)}async function je(s){await Q(`users/${s}/assessments_summary`)}async function Le(s){await Q(`users/${s}/assessments`)}async function pt(s){await Q(`users/${s}/students`)}async function ht(s){await Q(`users/${s}/uploads`)}async function ft(s){await be(ie(B,`users/${s}/workspace_cache/rosterSnapshot`)),await be(ie(B,`users/${s}/workspace_cache/groupInsights`))}async function Fe(s){await Promise.all([Le(s),je(s),pt(s),ht(s),ft(s)])}async function xt(s){await Promise.all([Ie(s),gt(s),Ee(s),Fe(s)])}const yt=["1","2","3","4","5","6","7","8"],L={stats:"dashboard-overview",mastery:"mastery-distribution",explorer:"class-student-explorer",assessmentHistory:"assessment-history",assignments:"assignments-radar"};function Y(s){if(s===null||Number.isNaN(s))return;const n=Number(s.toFixed(1));return Number.isFinite(n)?`${n>0?"+":""}${n.toFixed(1)} pts`:void 0}function z(s){if(s==null||Number.isNaN(s))return"N/A";const n=Number(s.toFixed(1));return Number.isInteger(n)?`${Math.round(n)}%`:`${n.toFixed(1)}%`}function ne(s){return s.length?s.reduce((o,i)=>o+i,0)/s.length:null}function vt({user:s,loading:n}){const[o,i]=a.useState([]),[l,u]=a.useState([]),[m,b]=a.useState([]),[c,C]=a.useState("all"),[w,f]=a.useState("all"),[h,x]=a.useState("combined"),[p,W]=a.useState("combined"),[j,E]=a.useState(""),{records:R,summaries:ve,students:v,insights:Se,groupInsights:we,pedagogy:Ne}=Xe(),P=a.useMemo(()=>m.length?m:ve,[m,ve]);a.useEffect(()=>{!j&&v.length&&E(v[0].id)},[v,j]),a.useEffect(()=>{j&&v.every(t=>t.id!==j)&&E(v[0]?.id??"")},[v,j]);const Z=a.useMemo(()=>c==="all"?v:v.filter(t=>String(t.period??"")===c),[v,c]);a.useEffect(()=>{const t=Z.length?Z:v;if(!t.length){E("");return}j&&t.every(r=>r.id!==j)&&E(t[0]?.id??"")},[Z,v,j]);const le=a.useMemo(()=>{const t=new Set;return R.forEach(r=>{r.period!==null&&r.period!==void 0&&t.add(String(r.period))}),v.forEach(r=>{r.period!==null&&r.period!==void 0&&t.add(String(r.period))}),t},[R,v]),F=a.useMemo(()=>{const t=Array.from(new Set([...yt,...Array.from(le)]));return t.sort((r,g)=>Number(r)-Number(g)),t.map(r=>({value:r,hasData:le.has(r)}))},[le]);a.useEffect(()=>{c!=="all"&&(F.some(t=>t.value===c)||C(F[0]?.value??"all"))},[F,c]),a.useEffect(()=>{w!=="all"&&(F.some(t=>t.value===w)||f("all"))},[F,w]);const H=a.useMemo(()=>{const t=new Set;return P.forEach(r=>{r.testName&&t.add(r.testName)}),R.forEach(r=>{r.testName&&t.add(r.testName)}),["combined",...Array.from(t).sort((r,g)=>r.localeCompare(g))]},[P,R]);a.useEffect(()=>{H.includes(h)||x("combined")},[h,H]),a.useEffect(()=>{H.includes(p)||W("combined")},[p,H]);const J=a.useMemo(()=>h==="combined"?R:R.filter(t=>t.testName===h),[R,h]),Ce=a.useMemo(()=>h==="combined"?P:P.filter(t=>t.testName===h),[P,h]),ke=a.useMemo(()=>[...Ce].sort((t,r)=>{const g=t.updatedAt?t.updatedAt.getTime():0;return(r.updatedAt?r.updatedAt.getTime():0)-g}),[Ce]),N=ke[0]??null,_=ke[1]??null,Ae=a.useMemo(()=>{const t=new Map;return v.forEach(r=>{const g=r.period!=null?String(r.period):null;r.id&&t.set(r.id,g),r.displayName&&t.set(r.displayName,g)}),t},[v]),X=a.useMemo(()=>{const t=new Map;return[...J].sort((g,k)=>{const T=g.createdAt?g.createdAt.getTime():0;return(k.createdAt?k.createdAt.getTime():0)-T}).forEach(g=>{if(typeof g.score!="number")return;const k=g.studentId??g.displayName??g.id;if(!k||t.has(k))return;let T=null;g.period!==null&&g.period!==void 0?T=String(g.period):T=Ae.get(g.studentId??g.displayName??"")??null,t.set(k,{score:g.score,period:T,testName:g.testName??null})}),t},[J,Ae]),A=a.useMemo(()=>Array.from(X.values()).map(t=>t.score),[X]),Me=a.useMemo(()=>c==="all"?A:Array.from(X.values()).filter(t=>t.period===c).map(t=>t.score),[A,X,c]),ee=a.useMemo(()=>fe(A),[A]),oe=a.useMemo(()=>fe(Me),[Me]),O=a.useMemo(()=>c==="all"?J:J.filter(t=>String(t.period??"")===c),[J,c]),I=a.useMemo(()=>{const t=Array.from(new Set(O.map(y=>y.testName).filter(y=>!!y)));if(!O.length)return{average:null,topRecord:null,bottomRecord:null,total:0,assessments:t};const r=O.filter(y=>typeof y.score=="number");if(!r.length)return{average:null,topRecord:null,bottomRecord:null,total:O.length,assessments:t};const g=r.map(y=>y.score),k=ne(g),T=r.reduce((y,d)=>y?d.score>(y.score??-1/0)?d:y:d,null),re=r.reduce((y,d)=>y?d.score<(y.score??1/0)?d:y:d,null);return{average:k,topRecord:T,bottomRecord:re,total:O.length,assessments:t}},[O]),S=a.useMemo(()=>v.length?v.find(t=>t.id===j)??v[0]:null,[v,j]),$=a.useMemo(()=>{if(!S)return[];const t=R.filter(r=>r.studentId===S.id||!r.studentId&&r.displayName===S.displayName);return p==="combined"?t:t.filter(r=>r.testName===p)},[R,S,p]),G=a.useMemo(()=>{if(!S)return null;const t=$.filter(T=>typeof T.score=="number"),r=t.length?ne(t.map(T=>T.score)):null,g=$[0]??null,k=$.slice(0,3);return{average:r,latest:g,recent:k}},[$,S]),$e=a.useMemo(()=>S?$.length?$.map(t=>typeof t.score=="number"?t.score:null):[S.lastScore??null]:[],[S,$]),de=a.useMemo(()=>fe($e),[$e]),V=a.useMemo(()=>ut($),[$]),q=a.useMemo(()=>S?mt({student:S,history:$,classAverage:I?.average??Se?.averageScore??null,trendDelta:V,groupInsights:we,pedagogy:Ne??null}):null,[S,$,I?.average,Se?.averageScore,V,we,Ne]),_e=a.useMemo(()=>[...$].reverse().map((t,r)=>({label:t.testName??`Entry ${r+1}`,value:typeof t.score=="number"?t.score:null})),[$]),Ge=a.useMemo(()=>{const t=[];if(ee){const r=h==="combined"?"All classes Â· all tests":`${h}`;t.push({id:"all",title:r,subtitle:`Latest data across ${ee.totalLearners} learners`,summary:ee})}if(oe){const r=c==="all";t.push({id:"class",title:r?"Class overview":`Period ${c}`,subtitle:r?"Combined view of every active class":`Focused on learners rostered in period ${c}`,summary:oe})}return S&&de&&t.push({id:"student",title:S.displayName,subtitle:"Individual trajectory",summary:de,latestScore:typeof S.lastScore=="number"?S.lastScore:void 0,latestAssessment:S.lastAssessment??void 0,trendDelta:V??void 0}),t},[ee,oe,c,S,h,de,V]),Te=a.useMemo(()=>!N||!_||N.averageScore==null||_.averageScore==null?null:N.averageScore-_.averageScore,[N,_]),te=a.useMemo(()=>N?.studentCount!=null?N.studentCount:A.length,[A.length,N?.studentCount]),ce=a.useMemo(()=>N?.maxScore!=null?N.maxScore:A.length?Math.max(...A):null,[A,N]),ue=a.useMemo(()=>N?.minScore!=null?N.minScore:A.length?Math.min(...A):null,[A,N]),me=a.useMemo(()=>N?.averageScore!=null?N.averageScore:ne(A),[A,N]),Be=a.useMemo(()=>{const t=[];return t.push({id:"average-score",label:h==="combined"?"Latest average (all tests)":`${h} average`,value:me??0,displayValue:z(me),delta:Y(Te)}),t.push({id:"learner-count",label:"Learners represented",value:te??0,displayValue:te?te.toLocaleString():"N/A",delta:N?.studentCount!=null&&_?.studentCount!=null?Y(N.studentCount-_.studentCount):void 0}),t.push({id:"highest-score",label:"Peak score",value:ce??0,displayValue:z(ce)}),t.push({id:"lowest-score",label:"Floor score",value:ue??0,displayValue:z(ue)}),o.filter(r=>!["average-score","learner-count","highest-score","lowest-score"].includes(r.id)).forEach(r=>t.push(r)),t},[me,ce,te,ue,_?.studentCount,o,h,Te,N?.studentCount]),ge=a.useMemo(()=>w==="all"?P:P.filter(t=>String(t.period??"")===w),[P,w]),pe=a.useMemo(()=>[...P].filter(t=>t.averageScore!=null).sort((t,r)=>{const g=t.updatedAt?t.updatedAt.getTime():0,k=r.updatedAt?r.updatedAt.getTime():0;return g-k}).map((t,r)=>({label:t.testName||`Assessment ${r+1}`,value:t.averageScore??null})),[P]),He=a.useMemo(()=>[...ge].filter(t=>t.averageScore!=null).sort((t,r)=>{const g=t.updatedAt?t.updatedAt.getTime():0,k=r.updatedAt?r.updatedAt.getTime():0;return g-k}).map((t,r)=>({label:t.testName||`Assessment ${r+1}`,value:t.averageScore??null})),[ge]),Oe=a.useMemo(()=>{const t=pe.map(r=>r.value).filter(r=>r!=null);return ne(t)},[pe]);a.useEffect(()=>{if(!s){i([]),u([]),b([]);return}const t=ie(B,`users/${s.uid}/dashboard_stats/metrics`),r=he(t,y=>{const d=y.data()||{},D=[];if(typeof d.totalEnrollment=="number"&&D.push({id:"enrollment",label:"Learners scored",value:d.totalEnrollment}),typeof d.aiGroupCount=="number"||typeof d.rosterGroupCount=="number"||typeof d.groupCount=="number"){const M=typeof d.aiGroupCount=="number"?d.aiGroupCount:typeof d.rosterGroupCount=="number"?d.rosterGroupCount:d.groupCount;D.push({id:"groups",label:"Active groups",value:M??0,delta:Y(typeof d.aiGroupDelta=="number"?d.aiGroupDelta:typeof d.rosterGroupDelta=="number"?d.rosterGroupDelta:typeof d.groupDelta=="number"?d.groupDelta:null)})}typeof d.onTrack=="number"&&D.push({id:"on-track",label:"On track",value:d.onTrack??0,delta:Y(typeof d.onTrackDelta=="number"?d.onTrackDelta:null)}),typeof d.atRisk=="number"&&D.push({id:"at-risk",label:"Needs support",value:d.atRisk??0,delta:Y(typeof d.atRiskDelta=="number"?d.atRiskDelta:null)}),i(D)}),g=ze(ye(B,`users/${s.uid}/assignments`),Re("dueDate","asc")),k=he(g,y=>{const d=[];y.forEach(D=>{const M=D.data();d.push({id:D.id,title:M.title??"N/A",dueDate:M.dueDate,status:M.status??"draft"})}),u(d.slice(0,6))}),T=ze(ye(B,`users/${s.uid}/assessments_summary`),Re("updatedAt","desc")),re=he(T,y=>{const d=[];y.forEach(D=>{const M=D.data();d.push({id:D.id,testName:M.testName??"N/A",period:M.period,quarter:M.quarter,studentCount:M.studentCount,averageScore:M.averageScore,maxScore:M.maxScore,minScore:M.minScore,updatedAt:M.updatedAt?.toDate?.()??null})}),b(d)});return()=>{r(),k(),re()}},[s]);const Ve=a.useCallback(async()=>{s&&await Ie(s.uid)},[s]),qe=a.useCallback(async()=>{s&&await Promise.all([Le(s.uid),je(s.uid)])},[s]),Ue=a.useCallback(async()=>{s&&await Fe(s.uid)},[s]),Ye=a.useCallback(async()=>{s&&await je(s.uid)},[s]),Ke=a.useCallback(async()=>{s&&await Ee(s.uid)},[s]),Qe=a.useCallback(async()=>{s&&await xt(s.uid)},[s]);if(n)return e.jsx("div",{className:"glass-card",children:"Loading your workspaceâ€¦"});if(!s)return e.jsxs("div",{className:"glass-card fade-in",children:[e.jsx("h2",{style:{fontSize:28,margin:"0 0 12px",fontWeight:800},children:"Authenticate to launch Synapse"}),e.jsx("p",{style:{color:"var(--text-muted)",maxWidth:520},children:"Sign in with your Google Workspace educator account to unlock roster uploads, Gemini-powered grouping, and live mastery analytics."})]});const se=t=>t==="combined"?"All tests Â· combined":t,Ze=Z.length?Z:v;return e.jsxs("div",{className:"fade-in",style:{display:"grid",gap:32},children:[e.jsx(nt,{}),e.jsxs("section",{style:{display:"grid",gap:32},children:[e.jsxs("section",{id:L.stats,style:{display:"grid",gap:16},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:16,flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Key metrics"}),e.jsx("h3",{style:{margin:"12px 0 6px",fontSize:24,fontWeight:700},children:"Daily pulse"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)",maxWidth:460},children:"Toggle between assessments to focus your planning. Combined mode blends every scored learner into a unified snapshot."})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx("label",{htmlFor:"dashboard-test-filter",style:{fontSize:13,color:"var(--text-muted)"},children:"Showing"}),e.jsx("select",{id:"dashboard-test-filter",value:h,onChange:t=>x(t.target.value),className:"table-input",style:{minWidth:180},children:H.map(t=>e.jsx("option",{value:t,children:se(t)},t))}),e.jsx(U,{label:"Clear metrics",onClear:Ve}),e.jsx(K,{targetId:L.stats,label:"Print key metrics"})]})]}),e.jsx(it,{cards:Be})]}),e.jsx(ct,{scopes:Ge,sectionId:L.mastery,headerExtras:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx("span",{className:"tag",style:{background:"rgba(148,163,184,0.15)",border:"1px solid rgba(148,163,184,0.35)"},children:se(h)}),e.jsx(U,{label:"Clear mastery",onClear:qe})]})}),e.jsxs("section",{id:L.explorer,className:"glass-card",style:{display:"grid",gap:24},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Class & student explorer"}),e.jsx("h3",{style:{margin:"12px 0 6px",fontSize:24,fontWeight:700},children:"Focus on every learner"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)",maxWidth:540},children:"Drill into periods and assessments to surface trends. Gemini keeps insights current so you can move from planning to action quickly."})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx(U,{label:"Clear explorer",onClear:Ue}),e.jsx(K,{targetId:L.explorer,label:"Print class and student explorer"})]})]}),e.jsxs("div",{style:{display:"grid",gap:18,gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))"},children:[e.jsxs("div",{className:"glass-subcard",style:{padding:18,borderRadius:18,border:"1px solid rgba(148,163,184,0.35)",background:"rgba(15,23,42,0.6)",display:"grid",gap:12},children:[e.jsxs("div",{style:{display:"grid",gap:4},children:[e.jsx("label",{htmlFor:"dashboard-period-filter",style:{fontWeight:600},children:"Class focus"}),e.jsx("span",{style:{color:"var(--text-muted)",fontSize:12},children:"Select all classes or a period to tailor metrics. Periods without uploads stay available for future data."})]}),e.jsxs("select",{id:"dashboard-period-filter",value:c,onChange:t=>C(t.target.value),className:"table-input",children:[e.jsx("option",{value:"all",children:"All classes"}),F.map(t=>e.jsx("option",{value:t.value,children:`Period ${t.value}${t.hasData?"":" Â· no data yet"}`},t.value))]})]}),e.jsxs("div",{className:"glass-subcard",style:{padding:18,borderRadius:18,border:"1px solid rgba(148,163,184,0.35)",background:"rgba(15,23,42,0.6)",display:"grid",gap:12},children:[e.jsxs("div",{style:{display:"grid",gap:4},children:[e.jsx("label",{htmlFor:"dashboard-explorer-test",style:{fontWeight:600},children:"Assessment focus"}),e.jsx("span",{style:{color:"var(--text-muted)",fontSize:12},children:"Compare an individual test or keep the combined perspective to show every evidence point."})]}),e.jsx("select",{id:"dashboard-explorer-test",value:p,onChange:t=>W(t.target.value),className:"table-input",children:H.map(t=>e.jsx("option",{value:t,children:se(t)},t))})]}),e.jsxs("div",{className:"glass-subcard",style:{padding:18,borderRadius:18,border:"1px solid rgba(99,102,241,0.35)",background:"linear-gradient(135deg, rgba(99,102,241,0.25), rgba(14,165,233,0.18))",display:"grid",gap:12},children:[e.jsxs("div",{style:{display:"grid",gap:4},children:[e.jsx("label",{htmlFor:"dashboard-student-select",style:{fontWeight:600},children:"Spotlight learner"}),e.jsx("span",{style:{color:"var(--text-muted)",fontSize:12},children:"Choose a student to review their assessment story and Gemini-powered coaching notes."})]}),e.jsx("select",{id:"dashboard-student-select",value:j,onChange:t=>E(t.target.value),className:"table-input",children:Ze.map(t=>e.jsx("option",{value:t.id,children:t.displayName},t.id))})]})]}),e.jsxs("div",{style:{display:"grid",gap:18,gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))"},children:[e.jsxs("div",{className:"glass-subcard",style:{padding:20,borderRadius:18,border:"1px solid rgba(148,163,184,0.35)",background:"rgba(15,23,42,0.65)",display:"grid",gap:12},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[e.jsx("strong",{style:{fontSize:18},children:"Class summary"}),e.jsx("span",{className:"tag",style:{background:"rgba(148,163,184,0.2)",border:"1px solid rgba(148,163,184,0.35)"},children:c==="all"?"All classes":`Period ${c}`})]}),e.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:28,fontWeight:700},children:z(I.average)}),e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)"},children:"Average proficiency"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:20,fontWeight:600},children:I.total}),e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)"},children:"Assessments scored"})]})]}),e.jsxs("div",{style:{display:"grid",gap:6,color:"var(--text-muted)",fontSize:13},children:[e.jsxs("span",{children:["Top performer:"," ",I.topRecord?`${I.topRecord.displayName} Â· ${z(I.topRecord.score??null)}`:"N/A"]}),e.jsxs("span",{children:["Focus area:"," ",I.bottomRecord?`${I.bottomRecord.displayName} Â· ${z(I.bottomRecord.score??null)}`:"N/A"]})]})]}),S&&G&&e.jsxs("div",{className:"glass-subcard",style:{padding:20,borderRadius:18,border:"1px solid rgba(148,163,184,0.35)",background:"rgba(15,23,42,0.65)",display:"grid",gap:14},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[e.jsx("strong",{style:{fontSize:18},children:S.displayName}),e.jsx("span",{className:"tag",style:{background:"rgba(99,102,241,0.18)",border:"1px solid rgba(99,102,241,0.35)"},children:se(p)})]}),e.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:26,fontWeight:700},children:z(G.average)}),e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)"},children:"Average"})]}),G.latest&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:20,fontWeight:600},children:z(G.latest.score??null)}),e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)"},children:G.latest.testName??"Latest evidence"})]}),V!=null&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:18,fontWeight:600},children:Y(V)??"â€”"}),e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)"},children:"Trend"})]})]}),e.jsx(xe,{data:_e,stroke:"rgba(129,140,248,0.9)",fill:"rgba(129,140,248,0.28)"}),G.recent.length>0&&e.jsxs("div",{children:[e.jsx("strong",{style:{fontSize:13},children:"Recent assessments"}),e.jsx("ul",{style:{margin:"6px 0 0 16px",padding:0,display:"grid",gap:4,color:"var(--text-muted)"},children:G.recent.map((t,r)=>e.jsxs("li",{children:[t.testName??"Assessment"," Â· ",z(t.score??null)]},r))})]})]}),q&&e.jsxs("div",{className:"glass-subcard",style:{padding:20,borderRadius:18,border:"1px solid rgba(99,102,241,0.35)",background:"linear-gradient(135deg, rgba(99,102,241,0.32), rgba(14,165,233,0.18))",display:"grid",gap:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[e.jsx("strong",{children:"AI insight"}),e.jsx("span",{className:"tag",style:{background:"rgba(15,23,42,0.45)",border:"1px solid rgba(255,255,255,0.2)"},children:"Gemini brief"})]}),e.jsx("p",{style:{margin:0,color:"rgba(226,232,240,0.92)",lineHeight:1.6},children:q.headline}),q.highlights.length>0&&e.jsxs("div",{children:[e.jsx("strong",{style:{fontSize:13},children:"Recent evidence"}),e.jsx("ul",{style:{margin:"8px 0 0 16px",padding:0,display:"grid",gap:4,color:"var(--text-muted)",listStyle:"disc"},children:q.highlights.map((t,r)=>e.jsx("li",{children:t},r))})]}),q.recommendations.length>0&&e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsx("strong",{style:{fontSize:13},children:"Next steps"}),e.jsx("ul",{style:{margin:"4px 0 0 16px",padding:0,display:"grid",gap:4,color:"var(--text-muted)",listStyle:"disc"},children:q.recommendations.map((t,r)=>e.jsx("li",{children:t},r))})]})]})]})]}),e.jsxs("section",{id:L.assessmentHistory,className:"glass-card",style:{display:"grid",gap:20},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Assessment history"}),e.jsx("h3",{style:{margin:"12px 0 6px",fontSize:24,fontWeight:700},children:"Progress across tests"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)",maxWidth:520},children:"Review every upload with period filters and trend visuals. Combined averages synthesize growth across the entire roster."})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx("label",{htmlFor:"assessment-period-filter",style:{fontSize:13,color:"var(--text-muted)"},children:"Period focus"}),e.jsxs("select",{id:"assessment-period-filter",value:w,onChange:t=>f(t.target.value),className:"table-input",style:{minWidth:160},children:[e.jsx("option",{value:"all",children:"All classes"}),F.map(t=>e.jsx("option",{value:t.value,children:`Period ${t.value}`},t.value))]}),e.jsx(U,{label:"Clear history",onClear:Ye}),e.jsx(K,{targetId:L.assessmentHistory,label:"Print assessment history"})]})]}),e.jsxs("div",{style:{display:"grid",gap:18,gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))"},children:[e.jsxs("div",{className:"glass-subcard",style:{padding:18,borderRadius:18,border:"1px solid rgba(148,163,184,0.35)",background:"rgba(15,23,42,0.6)",display:"grid",gap:6},children:[e.jsx("span",{style:{fontSize:12,letterSpacing:"0.08em",textTransform:"uppercase",color:"var(--text-muted)"},children:"All classes average across tests"}),e.jsx("strong",{style:{fontSize:28},children:z(Oe)})]}),e.jsxs("div",{className:"glass-subcard",style:{padding:18,borderRadius:18,border:"1px solid rgba(148,163,184,0.35)",background:"rgba(15,23,42,0.6)"},children:[e.jsx("strong",{style:{fontSize:14,color:"var(--text-muted)"},children:"All classes trend"}),e.jsx(xe,{data:pe,stroke:"rgba(45,212,191,0.9)",fill:"rgba(45,212,191,0.25)"})]}),e.jsxs("div",{className:"glass-subcard",style:{padding:18,borderRadius:18,border:"1px solid rgba(148,163,184,0.35)",background:"rgba(15,23,42,0.6)"},children:[e.jsx("strong",{style:{fontSize:14,color:"var(--text-muted)"},children:w==="all"?"Period comparison":`Period ${w} trend`}),e.jsx(xe,{data:He,stroke:"rgba(129,140,248,0.9)",fill:"rgba(129,140,248,0.25)"})]})]}),e.jsxs("table",{className:"table",style:{marginTop:8},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Assessment"}),e.jsx("th",{children:"Period"}),e.jsx("th",{children:"Avg"}),e.jsx("th",{children:"High"}),e.jsx("th",{children:"Low"}),e.jsx("th",{children:"Updated"})]})}),e.jsx("tbody",{children:ge.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.testName}),e.jsx("td",{children:t.period??"All"}),e.jsx("td",{children:z(t.averageScore??null)}),e.jsx("td",{children:z(t.maxScore??null)}),e.jsx("td",{children:z(t.minScore??null)}),e.jsx("td",{children:t.updatedAt?t.updatedAt.toLocaleString():"N/A"})]},t.id))})]})]}),e.jsxs("section",{id:L.assignments,className:"glass-card",style:{display:"grid",gap:20},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Upcoming"}),e.jsx("h3",{style:{margin:"12px 0 6px",fontSize:24,fontWeight:700},children:"Assignments radar"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)",maxWidth:480},children:"Keep extensions, reteach plans, and mastery celebrations organized in one hub ready for printing."})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx(U,{label:"Clear assignments",onClear:Ke}),e.jsx(K,{targetId:L.assignments,label:"Print assignments radar"})]})]}),l.length===0?e.jsx("div",{className:"empty-state",style:{marginTop:18},children:"Create differentiated assignments from any standard to monitor mastery progress here."}):e.jsxs("table",{className:"table",style:{marginTop:8},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Assignment"}),e.jsx("th",{children:"Due date"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:l.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.title}),e.jsx("td",{children:t.dueDate?new Date(t.dueDate).toLocaleDateString():"No due date"}),e.jsx("td",{style:{textTransform:"capitalize"},children:t.status})]},t.id))})]})]})]}),e.jsxs("div",{style:{display:"grid",justifyItems:"center",gap:12},children:[e.jsx(U,{label:"Master clear workspace",onClear:Qe,tone:"danger"}),e.jsx("p",{style:{fontSize:12,color:"var(--text-muted)",textAlign:"center",maxWidth:360},children:"Master clear removes dashboard metrics, assessments, students, assignments, and cached insights for this account. Use with care."})]})]})}export{vt as default};
