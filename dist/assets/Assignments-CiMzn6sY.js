import{r as a,d,j as e}from"./index-keyQ7pV2.js";import{l as y,j as T,n as k,T as w,u as $,h as S,p as z}from"./firebase-DnjqOjBc.js";function M({user:s}){const[c,o]=a.useState([]),[r,u]=a.useState(""),[h,b]=a.useState("MA.7.AR.1.1"),[m,D]=a.useState("emerging"),[g,x]=a.useState(""),[j,i]=a.useState("");a.useEffect(()=>{if(!s){o([]);return}const t=y(d,`users/${s.uid}/assignments`),l=T(t,A=>{const f=[];A.forEach(v=>{const n=v.data();f.push({id:v.id,title:n.title,standardCode:n.standardCode,tier:n.tier||"emerging",dueDate:n.dueDate,status:n.status||"draft"})}),o(f)});return()=>l()},[s]);async function C(t){if(t.preventDefault(),!!s){if(!r.trim()){i("Title is required.");return}await k(y(d,`users/${s.uid}/assignments`),{title:r,standardCode:h,tier:m,status:"draft",dueDate:g||null,createdAt:w.now()}),u(""),x(""),i("Assignment created.")}}async function p(t,l){s&&(await $(S(d,`users/${s.uid}/assignments/${t}`),{status:l}),i("Status updated."))}async function N(t){s&&(await z(S(d,`users/${s.uid}/assignments/${t}`)),i("Assignment deleted."))}return s?e.jsxs("div",{className:"fade-in",style:{display:"grid",gap:24},children:[e.jsxs("section",{className:"glass-card",children:[e.jsx("div",{className:"badge",children:"Create assignment"}),e.jsx("h2",{style:{margin:"12px 0 6px",fontSize:28,fontWeight:800},children:"Launch differentiated tasks"}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:"assignment-title",children:"Title"}),e.jsx("input",{id:"assignment-title",name:"assignment-title",value:r,onChange:t=>u(t.target.value),required:!0})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:"assignment-standard",children:"Standard code"}),e.jsx("input",{id:"assignment-standard",name:"assignment-standard",value:h,onChange:t=>b(t.target.value),required:!0})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:"assignment-tier",children:"Tier"}),e.jsxs("select",{id:"assignment-tier",name:"assignment-tier",value:m,onChange:t=>D(t.target.value),children:[e.jsx("option",{value:"emerging",children:"Emerging"}),e.jsx("option",{value:"on-level",children:"On-level"}),e.jsx("option",{value:"accelerated",children:"Accelerated"})]})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:"assignment-due",children:"Due date"}),e.jsx("input",{id:"assignment-due",name:"assignment-due",type:"date",value:g,onChange:t=>x(t.target.value)})]}),e.jsx("button",{type:"submit",className:"primary",children:"Create assignment"})]}),j&&e.jsx("p",{style:{marginTop:12,color:"var(--text-muted)"},children:j})]}),e.jsxs("section",{className:"glass-card",children:[e.jsx("h3",{style:{margin:0,fontSize:24,fontWeight:700},children:"Assignment tracker"}),c.length===0?e.jsx("div",{className:"empty-state",children:"Create an assignment to populate this table."}):e.jsxs("table",{className:"table",style:{marginTop:16},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Standard"}),e.jsx("th",{children:"Tier"}),e.jsx("th",{children:"Due date"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:c.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.title}),e.jsx("td",{children:t.standardCode}),e.jsx("td",{style:{textTransform:"capitalize"},children:t.tier.replace("-"," ")}),e.jsx("td",{children:t.dueDate?new Date(t.dueDate).toLocaleDateString():"â€”"}),e.jsx("td",{style:{textTransform:"capitalize"},children:t.status}),e.jsxs("td",{style:{display:"flex",gap:8},children:[e.jsx("button",{className:"secondary",onClick:()=>p(t.id,"assigned"),children:"Mark assigned"}),e.jsx("button",{className:"secondary",onClick:()=>p(t.id,"completed"),children:"Mark complete"}),e.jsx("button",{className:"secondary",onClick:()=>N(t.id),children:"Delete"})]})]},t.id))})]})]})]}):e.jsxs("div",{className:"glass-card fade-in",children:[e.jsx("h2",{style:{margin:0,fontSize:26,fontWeight:800},children:"Authenticate to manage assignments"}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"Assignments are stored securely within your Firestore workspace scope."})]})}export{M as default};
