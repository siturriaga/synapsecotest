import{r as t,j as e}from"./index-DXLrP2vc.js";import{c as T}from"./catalog-hwBwqGgt.js";import{s as w}from"./safeFetch-a-dzkaAs.js";import"./firebase-DnjqOjBc.js";function z({user:h}){const l=t.useMemo(()=>T.subjects,[]),[n,b]=t.useState(""),[d,v]=t.useState(""),[x,m]=t.useState([]),[c,o]=t.useState(null),[u,S]=t.useState("target vocabulary development and conceptual understanding"),[r,N]=t.useState(null),[j,y]=t.useState(!1),[f,g]=t.useState(null);t.useEffect(()=>{if(!n||!d){m([]),o(null);return}const a=l.find(i=>i.id===n)?.grades?.[d]?.standards??[];m(a),o(i=>a.some(p=>p.code===i?.code)?i:null)},[n,d,l]);async function C(){if(!h||!c||!n||!d){g("Sign in and complete the subject, grade, and standard selections first.");return}y(!0),g(null);try{const s=await w("/.netlify/functions/generateAssignment",{method:"POST",body:JSON.stringify({standardCode:c.code,standardName:c.name,focus:u,subject:l.find(a=>a.id===n)?.label??n,grade:d,assessmentType:"reading_plus",questionCount:5,includeRemediation:!0})});N(s)}catch(s){console.error(s),g(s?.message??"Gemini lesson generation failed.")}finally{y(!1)}}return h?e.jsxs("div",{className:"fade-in",style:{display:"grid",gap:24},children:[e.jsxs("section",{className:"glass-card",children:[e.jsx("div",{className:"badge",children:"Standards library"}),e.jsx("h2",{style:{margin:"12px 0 6px",fontSize:28,fontWeight:800},children:"Browse standards by subject and grade"}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"Select a subject and grade level to reveal the appropriate standards, then launch AI-generated assignments from the same workflow used on the assignments page."}),e.jsxs("div",{style:{display:"grid",gap:16,marginTop:18},children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:"standards-subject",children:"Subject"}),e.jsxs("select",{id:"standards-subject",name:"standards-subject",value:n,onChange:s=>b(s.target.value),children:[e.jsx("option",{value:"",children:"Select a subject"}),l.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))]})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:"standards-grade",children:"Grade level"}),e.jsxs("select",{id:"standards-grade",name:"standards-grade",value:d,onChange:s=>v(s.target.value),disabled:!n,children:[e.jsx("option",{value:"",children:"Select grade 6, 7, or 8"}),["6","7","8"].map(s=>e.jsxs("option",{value:s,children:["Grade ",s]},s))]})]})]}),x.length>0?e.jsx("div",{style:{display:"grid",gap:14,marginTop:18},children:x.map(s=>e.jsxs("button",{className:"secondary",style:{justifyContent:"flex-start",textAlign:"left",padding:"14px 18px",background:r?.standardCode===s.code||c?.code===s.code?"rgba(99,102,241,0.18)":"rgba(15,23,42,0.65)"},onClick:()=>o(s),children:[e.jsx("span",{style:{fontWeight:700},children:s.code}),e.jsx("span",{style:{display:"block",marginTop:6,fontSize:14,color:"var(--text-muted)"},children:s.name})]},s.code))}):e.jsx("div",{className:"empty-state",style:{marginTop:18},children:"Choose a subject and grade to load standards."})]}),e.jsxs("section",{className:"glass-card",style:{display:"grid",gap:18},children:[e.jsx("h3",{style:{margin:0,fontSize:24,fontWeight:700},children:"Differentiated lesson brief"}),e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:"standard-focus",children:"Instructional focus"}),e.jsx("input",{id:"standard-focus",name:"standard-focus",value:u,onChange:s=>S(s.target.value),placeholder:"e.g., connect to career pathways"})]}),e.jsx("button",{className:"primary",onClick:C,disabled:j,children:j?"Generating blueprint…":"Generate AI blueprint"}),f&&e.jsx("div",{style:{color:"#fecaca"},children:f}),r&&e.jsxs("div",{style:{display:"grid",gap:18},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"AI overview"}),e.jsxs("h4",{style:{margin:"10px 0 0",fontSize:20},children:[r.standardCode," · ",r.assessmentType.replace(/_/g," ")]}),e.jsx("p",{style:{color:"var(--text-muted)"},children:r.aiInsights.overview})]}),e.jsxs("div",{className:"glass-subcard",style:{border:"1px solid rgba(148,163,184,0.25)",borderRadius:18,padding:18,background:"rgba(15,23,42,0.55)"},children:[e.jsx("strong",{children:"Class strategies"}),e.jsx("ul",{style:{margin:"8px 0 0 18px"},children:r.aiInsights.classStrategies.map((s,a)=>e.jsx("li",{children:s},a))}),e.jsx("strong",{style:{display:"block",marginTop:12},children:"Next steps"}),e.jsx("ul",{style:{margin:"8px 0 0 18px"},children:r.aiInsights.nextSteps.map((s,a)=>e.jsx("li",{children:s},a))})]}),r.levels.map(s=>e.jsxs("article",{style:{border:"1px solid rgba(148,163,184,0.2)",borderRadius:18,padding:18,background:"rgba(15,23,42,0.6)"},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("h5",{style:{margin:0,fontSize:18},children:s.level}),e.jsx("p",{style:{color:"var(--text-muted)",marginTop:4},children:s.description})]}),e.jsx("span",{className:"tag",children:"Differentiated"})]}),e.jsx("div",{style:{marginTop:12,display:"grid",gap:12},children:s.questions.map(a=>e.jsxs("div",{style:{border:"1px solid rgba(99,102,241,0.25)",borderRadius:12,padding:12},children:[e.jsx("strong",{children:"Prompt:"}),e.jsx("p",{style:{margin:"8px 0",color:"var(--text-muted)"},children:a.prompt}),a.options&&e.jsx("ol",{style:{margin:"0 0 0 18px"},children:a.options.map((i,p)=>e.jsx("li",{children:i},p))}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx("strong",{children:"Answer:"})," ",a.answer]}),e.jsxs("div",{style:{marginTop:4,color:"var(--text-muted)"},children:["Why: ",a.rationale]})]},a.id))}),s.remediation.length>0&&e.jsxs("div",{style:{marginTop:12},children:[e.jsx("strong",{children:"Remediation ideas"}),e.jsx("ul",{style:{margin:"8px 0 0 18px"},children:s.remediation.map((a,i)=>e.jsx("li",{children:a},i))})]})]},s.level))]})]})]}):e.jsxs("div",{className:"glass-card fade-in",children:[e.jsx("h2",{style:{margin:0,fontSize:26,fontWeight:800},children:"Authenticate to generate lessons"}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"Your selections are processed securely via Netlify Functions with Gemini."})]})}export{z as default};
