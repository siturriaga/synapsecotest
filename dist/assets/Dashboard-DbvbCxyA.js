import{r as l,j as e,d as p}from"./index-BdaUekzB.js";import{m as R,k as j,q as b,h as S,j as w}from"./firebase-DMftn6xT.js";const y=[{id:"sunrise",gradient:"linear-gradient(140deg, rgba(254,215,170,0.35), rgba(129,140,248,0.2))",caption:"Line up your goals while the day is fresh â€” Gemini is ready to draft supports.",greeting:"Good morning",icon:"ğŸŒ…",iconColor:"#fbbf24"},{id:"day",gradient:"linear-gradient(140deg, rgba(14,165,233,0.28), rgba(59,130,246,0.24))",caption:"Midday momentum keeps every learner on track with just-in-time insights.",greeting:"Good afternoon",icon:"â˜€ï¸",iconColor:"#fde68a"},{id:"sunset",gradient:"linear-gradient(140deg, rgba(249,115,22,0.28), rgba(168,85,247,0.24))",caption:"Capture wins, gaps, and reassignment needs before the sun goes down.",greeting:"Good evening",icon:"ğŸŒ‡",iconColor:"#fb923c"},{id:"night",gradient:"linear-gradient(160deg, rgba(15,118,110,0.28), rgba(99,102,241,0.28))",caption:"Night mode engaged â€” prep tomorrowâ€™s breakthroughs with calm clarity.",greeting:"Good night",icon:"ğŸŒ™",iconColor:"#a5b4fc"}];function I(s){const i=s.getHours();return i<10?y[0]:i<16?y[1]:i<20?y[2]:y[3]}function G(s){return(s.getHours()*60+s.getMinutes()+s.getSeconds()/60)/1440*360}function M(){const[s,i]=l.useState(()=>new Date);l.useEffect(()=>{const g=window.setInterval(()=>{i(new Date)},1e3);return()=>window.clearInterval(g)},[]);const o=l.useMemo(()=>I(s),[s]),u=l.useMemo(()=>{const g=G(s),x=s.getSeconds()/60;return g+Math.sin(x*2*Math.PI)*6},[s]),h=l.useMemo(()=>new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"2-digit"}).format(s),[s]),m=l.useMemo(()=>new Intl.DateTimeFormat(void 0,{weekday:"long",month:"long",day:"numeric"}).format(s),[s]);return e.jsxs("section",{className:`glass-card dynamic-welcome ${o.id}`,style:{marginBottom:28,backgroundImage:o.gradient},children:[e.jsxs("div",{className:`welcome-orb ${o.id}`,"aria-hidden":!0,style:{"--welcome-rotation":`${u}deg`},children:[e.jsx("div",{className:"welcome-orb__glow"}),e.jsx("div",{className:"welcome-orb__core"}),e.jsx("div",{className:"welcome-orb__trail"}),e.jsx("div",{className:"welcome-orb__celestial",style:{color:o.iconColor},children:e.jsx("span",{children:o.icon})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Dynamic welcome"}),e.jsxs("h1",{style:{fontSize:34,margin:"12px 0 6px",fontWeight:800},children:[o.greeting,", educator."]}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:16,maxWidth:520},children:o.caption}),e.jsxs("div",{style:{display:"flex",gap:14,marginTop:16,alignItems:"center",color:"rgba(226,232,240,0.8)"},children:[e.jsx("span",{style:{fontSize:18,fontWeight:700},children:h}),e.jsx("span",{style:{opacity:.7},children:m})]})]})]})}function _({cards:s}){return e.jsx("div",{className:"card-grid card-grid-4",children:s.map(i=>e.jsxs("article",{className:"glass-card fade-in",children:[e.jsx("div",{style:{fontSize:13,letterSpacing:"0.08em",textTransform:"uppercase",color:"var(--text-muted)"},children:i.label}),e.jsx("div",{style:{fontSize:40,fontWeight:900,marginTop:12},children:i.displayValue??i.value}),i.delta&&e.jsx("div",{className:"tag",style:{marginTop:10},children:i.delta})]},i.id))})}function P({user:s,loading:i}){const[o,u]=l.useState([]),[h,m]=l.useState([]),[g,x]=l.useState([]),[d,f]=l.useState(null),[N,A]=l.useState([]);return l.useEffect(()=>{if(!s){u([]),m([]),x([]),A([]),f(null);return}const t=R(p,`users/${s.uid}/dashboard_stats/metrics`),k=j(t,c=>{const a=c.data()||{},r=[];if(typeof a.totalEnrollment=="number"&&r.push({id:"enrollment",label:"Learners scored",value:a.totalEnrollment}),a.latestAssessment){const n=a.latestAssessment;f(n);const v=n.averageScore??null;r.push({id:"latest-average",label:"Latest class average",value:v??0,displayValue:v!==null?v.toFixed(1):"â€”"}),typeof n.studentCount=="number"&&r.push({id:"latest-count",label:"Students assessed",value:n.studentCount})}else f(null);typeof a.groupCount=="number"&&r.push({id:"groups",label:"Active Groups",value:a.groupCount??0,delta:a.groupDelta??void 0}),typeof a.onTrack=="number"&&r.push({id:"on-track",label:"On Track",value:a.onTrack??0,delta:a.onTrackDelta??void 0}),typeof a.atRisk=="number"&&r.push({id:"at-risk",label:"Needs Support",value:a.atRisk??0,delta:a.atRiskDelta??void 0}),r.length===0&&r.push({id:"placeholder",label:"Data incoming",value:0,displayValue:"â€”"}),u(r)}),D=b(w(p,`users/${s.uid}/logs`),S("createdAt","desc")),T=j(D,c=>{const a=[];c.forEach(r=>{const n=r.data();a.push({id:r.id,title:n.title??"Insight",detail:n.detail??n.message??"Gemini generated an insight.",createdAt:n.createdAt?.toDate?.()??null})}),m(a.slice(0,5))}),C=b(w(p,`users/${s.uid}/assignments`),S("dueDate","asc")),W=j(C,c=>{const a=[];c.forEach(r=>{const n=r.data();a.push({id:r.id,title:n.title??"Untitled assignment",dueDate:n.dueDate,status:n.status??"draft"})}),x(a.slice(0,4))}),z=b(w(p,`users/${s.uid}/assessments_summary`),S("updatedAt","desc")),L=j(z,c=>{const a=[];c.forEach(r=>{const n=r.data();a.push({id:r.id,testName:n.testName??"Assessment",period:n.period,quarter:n.quarter,studentCount:n.studentCount,averageScore:n.averageScore,maxScore:n.maxScore,minScore:n.minScore,updatedAt:n.updatedAt?.toDate?.()??null})}),A(a.slice(0,3))});return()=>{k(),T(),W(),L()}},[s]),i?e.jsx("div",{className:"glass-card",children:"Loading your workspaceâ€¦"}):s?e.jsxs("div",{className:"fade-in",children:[e.jsx(M,{}),e.jsxs("section",{style:{display:"grid",gap:28},children:[e.jsx(_,{cards:o}),d&&e.jsxs("section",{className:"glass-card",children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Latest mastery upload"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:d.testName})]}),d.period&&d.quarter&&e.jsxs("span",{className:"tag",children:["Period ",d.period," Â· ",d.quarter]})]}),e.jsx("div",{style:{display:"grid",gap:12,marginTop:18},children:e.jsxs("div",{style:{display:"flex",gap:18,flexWrap:"wrap"},children:[e.jsxs("div",{className:"glass-subcard",style:{padding:16,borderRadius:16,border:"1px solid rgba(148,163,184,0.25)",background:"rgba(15,23,42,0.55)"},children:[e.jsx("strong",{children:"Average"}),e.jsx("div",{style:{fontSize:26,fontWeight:700,marginTop:6},children:d.averageScore!==null&&d.averageScore!==void 0?d.averageScore.toFixed(1):"â€”"})]}),e.jsxs("div",{className:"glass-subcard",style:{padding:16,borderRadius:16,border:"1px solid rgba(148,163,184,0.25)",background:"rgba(15,23,42,0.55)"},children:[e.jsx("strong",{children:"Range"}),e.jsxs("div",{style:{marginTop:6},children:["High ",d.maxScore??"â€”"," Â· Low ",d.minScore??"â€”"]})]}),e.jsxs("div",{className:"glass-subcard",style:{padding:16,borderRadius:16,border:"1px solid rgba(148,163,184,0.25)",background:"rgba(15,23,42,0.55)"},children:[e.jsx("strong",{children:"Learners"}),e.jsx("div",{style:{fontSize:26,fontWeight:700,marginTop:6},children:d.studentCount??"â€”"})]})]})})]}),N.length>0&&e.jsxs("section",{className:"glass-card",children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Assessment history"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:"Recent uploads"})]}),e.jsx("a",{href:"/assignments",style:{color:"var(--accent)",fontWeight:600},children:"Design follow-ups â†’"})]}),e.jsxs("table",{className:"table",style:{marginTop:18},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Assessment"}),e.jsx("th",{children:"Period"}),e.jsx("th",{children:"Quarter"}),e.jsx("th",{children:"Avg"}),e.jsx("th",{children:"High"}),e.jsx("th",{children:"Low"}),e.jsx("th",{children:"Updated"})]})}),e.jsx("tbody",{children:N.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.testName}),e.jsx("td",{children:t.period??"â€”"}),e.jsx("td",{children:t.quarter??"â€”"}),e.jsx("td",{children:t.averageScore!==null&&t.averageScore!==void 0?t.averageScore.toFixed(1):"â€”"}),e.jsx("td",{children:t.maxScore??"â€”"}),e.jsx("td",{children:t.minScore??"â€”"}),e.jsx("td",{children:t.updatedAt?t.updatedAt.toLocaleString():"â€”"})]},t.id))})]})]}),e.jsxs("section",{className:"glass-card",children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Live oversight"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:"Pulse updates"})]}),e.jsx("a",{href:"/groups",style:{color:"var(--accent)",fontWeight:600},children:"Review groups â†’"})]}),h.length===0?e.jsx("div",{className:"empty-state",style:{marginTop:18},children:"No Gemini actions logged yet. Generate student groups or lessons to see reflective insights here."}):e.jsx("ul",{style:{listStyle:"none",padding:0,marginTop:22,display:"grid",gap:16},children:h.map(t=>e.jsxs("li",{style:{border:"1px solid rgba(148,163,184,0.2)",borderRadius:14,padding:16},children:[e.jsx("div",{style:{fontWeight:600},children:t.title}),e.jsx("div",{style:{color:"var(--text-muted)",marginTop:4},children:t.detail}),t.createdAt&&e.jsx("div",{style:{fontSize:12,marginTop:10,color:"rgba(148,163,184,0.7)"},children:t.createdAt.toLocaleString()})]},t.id))})]}),e.jsxs("section",{className:"glass-card",children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Upcoming"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:"Assignments radar"})]}),e.jsx("a",{href:"/assignments",style:{color:"var(--accent)",fontWeight:600},children:"Manage assignments â†’"})]}),g.length===0?e.jsx("div",{className:"empty-state",style:{marginTop:18},children:"Create differentiated assignments from any standard to monitor mastery progress here."}):e.jsxs("table",{className:"table",style:{marginTop:18},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Assignment"}),e.jsx("th",{children:"Due date"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:g.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.title}),e.jsx("td",{children:t.dueDate?new Date(t.dueDate).toLocaleDateString():"No due date"}),e.jsx("td",{style:{textTransform:"capitalize"},children:t.status})]},t.id))})]})]})]})]}):e.jsxs("div",{className:"glass-card fade-in",children:[e.jsx("h2",{style:{fontSize:28,margin:"0 0 12px",fontWeight:800},children:"Authenticate to launch Synapse"}),e.jsx("p",{style:{color:"var(--text-muted)",maxWidth:520},children:"Sign in with your Google Workspace educator account to unlock roster uploads, Gemini-powered grouping, and live mastery analytics."})]})}export{P as default};
