import{r as a,u as Je,j as e,d as H,a as Xe}from"./index-UOQmTZJ0.js";import{h as de,t as et,m as je,u as tt,q as ve,l as st,w as rt,j as ye,k as De}from"./firebase-HdBvgX-e.js";const ie=[{id:"sunrise",gradient:"linear-gradient(140deg, rgba(254,215,170,0.35), rgba(129,140,248,0.2))",caption:"Morning spark: let‚Äôs map today‚Äôs wins together and sketch the supports you need.",greeting:"Good morning",icon:"üåÖ",iconColor:"#fbbf24"},{id:"day",gradient:"linear-gradient(140deg, rgba(14,165,233,0.28), rgba(59,130,246,0.24))",caption:"Midday boost: grab the right insight, adjust groups, and keep every learner moving.",greeting:"Good afternoon",icon:"‚òÄÔ∏è",iconColor:"#fde68a"},{id:"sunset",gradient:"linear-gradient(140deg, rgba(249,115,22,0.28), rgba(168,85,247,0.24))",caption:"Evening check-in: jot the wins, note the gaps, and queue tomorrow‚Äôs nudges.",greeting:"Good evening",icon:"üåá",iconColor:"#fb923c"},{id:"night",gradient:"linear-gradient(160deg, rgba(15,118,110,0.28), rgba(99,102,241,0.28))",caption:"Night shift: slow the pace, reflect, and set up tomorrow‚Äôs breakthroughs with calm clarity.",greeting:"Good night",icon:"üåô",iconColor:"#a5b4fc"}];function at(s){const n=s.getHours();return n<10?ie[0]:n<16?ie[1]:n<20?ie[2]:ie[3]}function nt(s){return(s.getHours()*60+s.getMinutes()+s.getSeconds()/60)/1440*360}function it(){const[s,n]=a.useState(()=>new Date),[l,i]=a.useState(!1),{displayName:g}=Je();a.useEffect(()=>{const o=window.setInterval(()=>{n(new Date)},1e3);return()=>window.clearInterval(o)},[]),a.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function"){i(!1);return}const o=window.matchMedia("(max-width: 720px)"),u=()=>{i(o.matches)};return u(),typeof o.addEventListener=="function"?(o.addEventListener("change",u),()=>o.removeEventListener("change",u)):(o.addListener(u),()=>o.removeListener(u))},[]);const x=a.useMemo(()=>at(s),[s]),p=a.useMemo(()=>{const o=nt(s),u=s.getSeconds()/60;return o+Math.sin(u*2*Math.PI)*6},[s]),S=a.useMemo(()=>({"--welcome-rotation":`${p}deg`}),[p]),c=a.useMemo(()=>new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"2-digit"}).format(s),[s]),b=a.useMemo(()=>new Intl.DateTimeFormat(void 0,{weekday:"long",month:"long",day:"numeric"}).format(s),[s]);return e.jsxs("section",{className:`glass-card dynamic-welcome ${x.id}`,"data-compact":l?"true":void 0,style:{marginBottom:l?24:32,backgroundImage:x.gradient,position:l?"relative":"sticky",top:l?void 0:32,zIndex:l?void 0:5},children:[e.jsxs("div",{className:"welcome-backdrop","aria-hidden":!0,children:[e.jsx("span",{className:"welcome-particle"}),e.jsx("span",{className:"welcome-particle"}),e.jsx("span",{className:"welcome-particle"})]}),e.jsxs("div",{className:`welcome-orb ${x.id}`,"aria-hidden":!0,style:S,children:[e.jsx("div",{className:"welcome-orb__glow"}),e.jsx("div",{className:"welcome-orb__core"}),e.jsx("div",{className:"welcome-orb__trail"}),e.jsx("div",{className:"welcome-orb__celestial",style:{color:x.iconColor},children:e.jsx("span",{children:x.icon})})]}),e.jsxs("div",{className:"welcome-content",children:[e.jsxs("h1",{className:"welcome-title",children:[x.greeting,g?`, ${g}`:", educator","."]}),e.jsx("p",{className:"welcome-caption",children:x.caption}),e.jsxs("div",{className:"welcome-meta",children:[e.jsxs("div",{children:[e.jsx("span",{className:"welcome-meta__label",children:"Current time"}),e.jsx("div",{className:"welcome-meta__value",children:c})]}),e.jsxs("div",{children:[e.jsx("span",{className:"welcome-meta__label",children:"Today"}),e.jsx("div",{className:"welcome-meta__value",children:b})]})]})]})]})}const We=[{background:"linear-gradient(135deg, rgba(59,130,246,0.55), rgba(14,116,144,0.48))",border:"rgba(96,165,250,0.75)",accent:"rgba(226,245,255,0.94)",glow:"0 24px 45px rgba(14,116,144,0.35)"},{background:"linear-gradient(135deg, rgba(110,231,183,0.55), rgba(16,185,129,0.45))",border:"rgba(45,212,191,0.75)",accent:"rgba(236,253,245,0.94)",glow:"0 24px 45px rgba(16,185,129,0.28)"},{background:"linear-gradient(135deg, rgba(244,114,182,0.55), rgba(251,191,36,0.45))",border:"rgba(244,114,182,0.72)",accent:"rgba(255,241,242,0.94)",glow:"0 24px 45px rgba(236,72,153,0.28)"},{background:"linear-gradient(135deg, rgba(192,132,252,0.55), rgba(79,70,229,0.45))",border:"rgba(167,139,250,0.75)",accent:"rgba(237,233,254,0.94)",glow:"0 24px 45px rgba(124,58,237,0.32)"}];function lt({cards:s}){return e.jsx("div",{className:"card-grid card-grid-4",children:s.map((n,l)=>{const i=We[l%We.length];return e.jsxs("article",{className:"glass-card fade-in",style:{background:i.background,borderColor:i.border,color:i.accent,boxShadow:i.glow,backdropFilter:"blur(24px)",transform:"translateY(0)",transition:"transform 220ms ease, box-shadow 220ms ease"},onMouseEnter:g=>{g.currentTarget.style.transform="translateY(-6px)",g.currentTarget.style.boxShadow="0 32px 70px rgba(15,23,42,0.45)"},onMouseLeave:g=>{g.currentTarget.style.transform="translateY(0)",g.currentTarget.style.boxShadow=i.glow},children:[e.jsx("div",{style:{fontSize:13,letterSpacing:"0.08em",textTransform:"uppercase",opacity:.85},children:n.label}),e.jsx("div",{style:{fontSize:40,fontWeight:900,marginTop:12},children:n.displayValue??n.value}),n.delta&&e.jsx("div",{className:"tag",style:{marginTop:10,background:"rgba(15, 23, 42, 0.25)",border:"1px solid rgba(255,255,255,0.22)"},children:n.delta})]},n.id)})})}function ot(s,n){if(typeof window>"u")return;const l=document.getElementById(s);if(!l){window.print();return}const i=window.open("","_blank","noopener,noreferrer,width=900,height=650");if(!i){window.print();return}const g=l.cloneNode(!0),x=Array.from(document.head.querySelectorAll('style, link[rel="stylesheet"]')).map(c=>c.outerHTML).join(`
`),p=Object.entries(document.body.dataset).map(([c,b])=>`data-${c}="${b??""}"`).join(" "),S=p?` ${p}`:"";i.document.open(),i.document.write(`<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>${n??document.title}</title>
${x}
<style>
  @media print {
    body { margin: 24px; }
  }
</style>
</head>
<body${S}>
<div class="print-container">${g.outerHTML}</div>
</body>
</html>`),i.document.close(),i.focus(),i.print(),i.close()}function B({targetId:s,label:n="Print section",title:l}){const i=a.useCallback(()=>{ot(s,l)},[s,l]);return e.jsxs("button",{type:"button",onClick:i,className:"print-button","aria-label":n,title:n,children:[e.jsx("span",{className:"print-button__icon","aria-hidden":"true",children:"üñ®Ô∏è"}),e.jsx("span",{className:"print-button__label",children:"Print"})]})}const dt=[{id:"approaching",label:"Approaching",description:"Below 50% ‚Äî intensive reteach needed",color:"#fda4af",background:"linear-gradient(90deg, rgba(248, 113, 113, 0.38), rgba(244, 114, 182, 0.28))"},{id:"developing",label:"Developing",description:"50-69% ‚Äî targeted scaffolds",color:"#fcd34d",background:"linear-gradient(90deg, rgba(251, 191, 36, 0.38), rgba(250, 204, 21, 0.22))"},{id:"onGrade",label:"On Grade",description:"70-89% ‚Äî on grade level",color:"#4ade80",background:"linear-gradient(90deg, rgba(74, 222, 128, 0.38), rgba(16, 185, 129, 0.26))"},{id:"mastered",label:"Mastered",description:"90%+ ‚Äî enrichment ready",color:"#60a5fa",background:"linear-gradient(90deg, rgba(96, 165, 250, 0.38), rgba(129, 140, 248, 0.26))"}],ct="These visuals reflect the most recent score for each learner. Missing scores stay in the roster as N/A so uploads never block your workflow.";function Le(s,n){return n?Math.round(s/n*100):0}function ut(s){if(s===null||Number.isNaN(s))return"N/A";const n=Number(s.toFixed(1));return Number.isInteger(n)?`${Math.round(n)}%`:`${n.toFixed(1)}%`}function gt({scopes:s,sectionId:n="mastery-distribution",headerExtras:l,variant:i="standalone",title:g="Track mastery momentum",description:x=ct,printLabel:p="Print mastery distribution"}){const S=a.useMemo(()=>s.filter(b=>b.summary),[s]),c=a.useMemo(()=>S.reduce((b,o)=>{const u=o.summary;if(!u)return b;const h=[],j=Le(u.counts.mastered+u.counts.onGrade,u.scoredLearners),f=u.scoredLearners>0?u.scoredLearners:"N/A",D=u.totalLearners>0?u.totalLearners:"N/A",y=u.scoredLearners>0;if(u.scoredLearners&&(j>=80?h.push("Celebrate the wins ‚Äî offer enrichment bursts to keep the momentum going."):j>=60?h.push("Solid footing ‚Äî a few targeted scaffolds can push more learners into mastery."):h.push("Let‚Äôs shore up essentials with small-group reteach and quick checks for understanding.")),o.trendDelta!=null&&!Number.isNaN(o.trendDelta)){const N=o.trendDelta>0?`‚ñ≤${o.trendDelta.toFixed(1)} pts`:`‚ñº${Math.abs(o.trendDelta).toFixed(1)} pts`;h.push(`Latest shift: ${N} across the newest uploads.`)}y&&h.length===0&&h.push("Scores are steady ‚Äî keep the evidence flowing to spotlight the next growth area.");const W=h.join(" ");return b.push(e.jsxs("article",{className:"glass-subcard",style:{border:"1px solid rgba(148,163,184,0.32)",borderRadius:20,padding:22,display:"grid",gap:16,background:"linear-gradient(135deg, rgba(15,23,42,0.72), rgba(30,64,175,0.25))",boxShadow:"0 28px 60px rgba(15,23,42,0.45)"},children:[e.jsxs("header",{style:{display:"grid",gap:6},children:[e.jsx("strong",{style:{fontSize:18},children:o.title}),e.jsx("span",{style:{color:"var(--text-muted)",fontSize:13},children:o.subtitle})]}),e.jsxs("div",{style:{display:"flex",gap:20,alignItems:"baseline",flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:30,fontWeight:700},children:ut(u.average)}),e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)"},children:"Average proficiency"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:24,fontWeight:700},children:f}),e.jsxs("div",{style:{fontSize:13,color:"var(--text-muted)"},children:["Scored / ",D]})]}),o.latestScore!==void 0&&o.latestScore!==null&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:24,fontWeight:700},children:[o.latestScore.toFixed(1),"%"]}),e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)"},children:o.latestAssessment??"Latest score"})]})]}),e.jsx("div",{style:{display:"grid",gap:12},children:dt.map(N=>{const O=u.counts[N.id],v=Le(O,u.scoredLearners),ee=y&&O>0;return e.jsxs("div",{style:{borderRadius:16,padding:"12px 14px",display:"grid",gap:6,background:N.background,border:"1px solid rgba(148,163,184,0.28)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",gap:12},children:[e.jsx("span",{style:{fontWeight:600},children:N.label}),e.jsx("span",{style:{fontSize:18,fontWeight:700,color:N.color},children:y?`${v}%`:"‚Äî"})]}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:12},children:N.description}),ee&&e.jsxs("span",{style:{fontSize:12,color:"rgba(226,232,240,0.86)"},children:[O.toLocaleString()," learners"]})]},N.id)})}),W&&e.jsx("p",{style:{margin:0,color:"rgba(226,232,240,0.88)",fontSize:13,lineHeight:1.5},children:W})]},o.id)),b},[]),[S]);return S.length?i==="embedded"?e.jsxs("div",{id:n,style:{display:"grid",gap:18},children:[l&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap"},children:[l,e.jsx(B,{targetId:n,label:p})]}),e.jsx("div",{style:{display:"grid",gap:18,gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))"},children:c})]}):e.jsxs("section",{id:n,className:"glass-card",style:{display:"grid",gap:20},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:16,flexWrap:"wrap"},children:[e.jsx("div",{children:e.jsx("h3",{style:{margin:0,fontSize:24,fontWeight:700},children:g})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap",maxWidth:520},children:[l,e.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:x}),e.jsx(B,{targetId:n,label:p})]})]}),e.jsx("div",{style:{display:"grid",gap:18,gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))"},children:c})]}):i==="embedded"?e.jsxs("div",{id:n,style:{borderRadius:20,border:"1px dashed rgba(148,163,184,0.35)",padding:24,display:"grid",gap:12,background:"rgba(15,23,42,0.45)"},children:[e.jsx("strong",{style:{fontSize:16},children:"Mastery data will appear once assessments are uploaded."}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Keep adding evidence ‚Äî the charts refresh automatically for the class and selected learner."})]}):e.jsxs("section",{id:n,className:"glass-card",style:{display:"grid",gap:16},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:16},children:[e.jsx("div",{children:e.jsx("h3",{style:{margin:0,fontSize:24,fontWeight:700},children:g})}),e.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[l,e.jsx(B,{targetId:n,label:p})]})]}),e.jsxs("article",{className:"glass-subcard",style:{border:"1px solid rgba(148,163,184,0.35)",borderRadius:18,padding:18,background:"rgba(15,23,42,0.62)"},children:[e.jsx("strong",{style:{fontSize:18,display:"block",marginBottom:6},children:"Mastery data"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Proficiency metrics are currently N/A. Upload data when you have it, but your workflow stays flexible in the meantime."})]})]})}function be(s){const n=s.length,l={approaching:0,developing:0,onGrade:0,mastered:0},i=[];s.forEach(p=>{typeof p=="number"&&Number.isFinite(p)&&(i.push(p),p>=90?l.mastered+=1:p>=70?l.onGrade+=1:p>=50?l.developing+=1:l.approaching+=1)});const g=i.length,x=g?i.reduce((p,S)=>p+S,0)/g:null;return{totalLearners:n,scoredLearners:g,average:x,counts:l}}function mt(s){if(!s.length)return null;const n=s.filter(g=>typeof g.score=="number");if(n.length<2)return null;const l=n[0].score,i=n[1].score;return l-i}function Ie(s){return s.toLowerCase().replace(/\s+/g," ").trim()}function pt({student:s,history:n,classAverage:l,trendDelta:i,groupInsights:g,pedagogy:x}){if(!s)return null;const p=n[0]??null,S=typeof p?.score=="number"?p.score:s.lastScore,c=p?.testName??s.lastAssessment,b=[];if(typeof S=="number"){const f=S.toFixed(1).replace(/\.0$/,""),D=c?` on ${c}`:"";if(b.push(`${s.displayName} is working around ${f}%${D}, giving us a clear snapshot for next steps.`),typeof l=="number"){const y=S-l,W=y>0?"ahead of":y<0?"just behind":"right in step with",N=Math.abs(y).toFixed(1).replace(/\.0$/,"");y!==0?b.push(`That‚Äôs about ${N} pts ${W} the class average of ${l.toFixed(1)}%.`):b.push("They are right in step with the current class average.")}}else b.push(`${s.displayName} doesn‚Äôt have a recent scored checkpoint yet. Let‚Äôs capture the next one together so we can tailor support.`);if(typeof i=="number"&&!Number.isNaN(i)&&i!==0){const f=i>0?`building ‚ñ≤${i.toFixed(1)} pts momentum`:`showing a ‚ñº${Math.abs(i).toFixed(1)} pts dip`;b.push(`Recent trajectory is ${f} across the last two assessments.`)}const o=[];n.slice(0,3).forEach(f=>{const D=f.createdAt?f.createdAt.toLocaleDateString():"Recent",y=typeof f.score=="number"?`${f.score.toFixed(1).replace(/\.0$/,"")}%`:"N/A",W=f.testName??"Assessment";o.push(`${W} (${D}): ${y}`)}),!o.length&&typeof S=="number"&&o.push(`Latest recorded score: ${S.toFixed(1).replace(/\.0$/,"")}%`);const u=[],h=new Set([s.displayName,...s.nameVariants??[]].map(Ie)),j=g.find(f=>f.students.some(D=>h.has(Ie(D.name))));if(j){const f=j.recommendedPractices[0];u.push(`${s.displayName} sits in the ${j.label.toLowerCase()} cohort (${j.range}). Let‚Äôs lean on ${f??"targeted feedback and collaborative routines"} this week.`)}return x?.bestPractices?.length&&x.bestPractices.slice(0,2).forEach(f=>{u.push(f)}),u.length||u.push("Celebrate strengths during conferences and co-design the next learning target side by side."),{headline:b.join(" "),highlights:o,recommendations:u}}function le({data:s,stroke:n="rgba(94,234,212,0.9)",fill:l="rgba(94,234,212,0.25)"}){const i=a.useId();if(!s.length)return e.jsx("div",{style:{fontSize:12,color:"var(--text-muted)"},children:"No trend data"});const g=s.map(j=>typeof j.value=="number"?j.value:null),x=g.filter(j=>j!==null);if(!x.length)return e.jsx("div",{style:{fontSize:12,color:"var(--text-muted)"},children:"No scored trend"});const p=Math.min(...x),c=Math.max(...x)-p||1,b=g.map((j,f)=>{const D=f/Math.max(1,s.length-1)*100,y=j===null?null:100-(j-p)/c*100;return{x:D,y}});let o=!0;const u=b.map(j=>{if(j.y===null)return"";const f=o?"M":"L";return o=!1,`${f}${j.x},${j.y}`}).filter(Boolean).join(" "),h=u?`${u} L100,100 L0,100 Z`:"";return e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{width:"100%",height:90},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`${i}-sparkline`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:l,stopOpacity:.9}),e.jsx("stop",{offset:"100%",stopColor:l,stopOpacity:.1})]})}),h&&e.jsx("path",{d:h,fill:`url(#${i}-sparkline)`,stroke:"none",opacity:.8}),u&&e.jsx("path",{d:u,fill:"none",stroke:n,strokeWidth:2.5,strokeLinecap:"round"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"var(--text-muted)"},children:[e.jsx("span",{children:s[0]?.label}),e.jsx("span",{children:s[s.length-1]?.label})]})]})}function Q({label:s,onClear:n,tone:l="section"}){const[i,g]=a.useState(!1),x=async()=>{if(!(i||!window.confirm("Are you sure you want to clear this data? This action cannot be undone.")))try{g(!0),await n()}finally{g(!1)}},p=l==="danger"?"rgba(248,113,113,0.18)":"rgba(94,234,212,0.16)",S=l==="danger"?"rgba(248,113,113,0.6)":"rgba(94,234,212,0.45)",c=l==="danger"?"rgba(254,226,226,0.92)":"rgba(204,251,241,0.92)";return e.jsx("button",{type:"button",className:"clear-button",onClick:x,disabled:i,style:{display:"inline-flex",alignItems:"center",gap:8,padding:"6px 14px",borderRadius:999,border:`1px solid ${S}`,background:p,color:c,fontSize:13,textTransform:"uppercase",letterSpacing:"0.08em",cursor:i?"not-allowed":"pointer",opacity:i?.6:1},children:i?"Clearing‚Ä¶":s})}async function Z(s,n=H){const l=je(n,s);for(;;){const i=await tt(ve(l,st(500)));if(i.empty)return;const g=rt(n);i.docs.forEach(x=>{g.delete(x.ref)}),await g.commit()}}async function Se(s){try{await et(s)}catch(n){console.error("Failed to delete document",s.path,n)}}async function Pe(s){await Se(de(H,`users/${s}/dashboard_stats/metrics`))}async function ht(s){await Z(`users/${s}/logs`)}async function Ee(s){await Z(`users/${s}/assignments`)}async function we(s){await Z(`users/${s}/assessments_summary`)}async function Fe(s){await Z(`users/${s}/assessments`)}async function ft(s){await Z(`users/${s}/students`)}async function xt(s){await Z(`users/${s}/uploads`)}async function yt(s){await Se(de(H,`users/${s}/workspace_cache/rosterSnapshot`)),await Se(de(H,`users/${s}/workspace_cache/groupInsights`))}async function _e(s){await Promise.all([Fe(s),we(s),ft(s),xt(s),yt(s)])}async function bt(s){await Promise.all([Pe(s),ht(s),Ee(s),_e(s)])}const jt=["1","2","3","4","5","6","7","8"],E={stats:"dashboard-overview",mastery:"mastery-distribution",explorer:"class-student-explorer",assessmentHistory:"assessment-history",assignments:"assignments-radar"};function K(s){if(s===null||Number.isNaN(s))return;const n=Number(s.toFixed(1));return Number.isFinite(n)?`${n>0?"+":""}${n.toFixed(1)} pts`:void 0}function T(s){if(s==null||Number.isNaN(s))return"N/A";const n=Number(s.toFixed(1));return Number.isInteger(n)?`${Math.round(n)}%`:`${n.toFixed(1)}%`}function oe(s){return s.length?s.reduce((l,i)=>l+i,0)/s.length:null}function wt({user:s,loading:n}){const[l,i]=a.useState([]),[g,x]=a.useState([]),[p,S]=a.useState([]),[c,b]=a.useState("all"),[o,u]=a.useState("all"),[h,j]=a.useState("combined"),[f,D]=a.useState("combined"),[y,W]=a.useState(""),{records:N,summaries:O,students:v,insights:ee,groupInsights:Ne,pedagogy:Ce}=Xe(),I=a.useMemo(()=>p.length?p:O,[p,O]);a.useEffect(()=>{!y&&v.length&&W(v[0].id)},[v,y]),a.useEffect(()=>{y&&v.every(t=>t.id!==y)&&W(v[0]?.id??"")},[v,y]);const J=a.useMemo(()=>c==="all"?v:v.filter(t=>String(t.period??"")===c),[v,c]);a.useEffect(()=>{const t=J.length?J:v;if(!t.length){W("");return}y&&t.every(r=>r.id!==y)&&W(t[0]?.id??"")},[J,v,y]);const ce=a.useMemo(()=>{const t=new Set;return N.forEach(r=>{r.period!==null&&r.period!==void 0&&t.add(String(r.period))}),v.forEach(r=>{r.period!==null&&r.period!==void 0&&t.add(String(r.period))}),t},[N,v]),F=a.useMemo(()=>{const t=Array.from(new Set([...jt,...Array.from(ce)]));return t.sort((r,m)=>Number(r)-Number(m)),t.map(r=>({value:r,hasData:ce.has(r)}))},[ce]);a.useEffect(()=>{c!=="all"&&(F.some(t=>t.value===c)||b(F[0]?.value??"all"))},[F,c]),a.useEffect(()=>{o!=="all"&&(F.some(t=>t.value===o)||u("all"))},[F,o]);const V=a.useMemo(()=>{const t=new Set;return I.forEach(r=>{r.testName&&t.add(r.testName)}),N.forEach(r=>{r.testName&&t.add(r.testName)}),["combined",...Array.from(t).sort((r,m)=>r.localeCompare(m))]},[I,N]);a.useEffect(()=>{V.includes(h)||j("combined")},[h,V]),a.useEffect(()=>{V.includes(f)||D("combined")},[f,V]);const X=a.useMemo(()=>h==="combined"?N:N.filter(t=>t.testName===h),[N,h]),ke=a.useMemo(()=>h==="combined"?I:I.filter(t=>t.testName===h),[I,h]),Ae=a.useMemo(()=>[...ke].sort((t,r)=>{const m=t.updatedAt?t.updatedAt.getTime():0;return(r.updatedAt?r.updatedAt.getTime():0)-m}),[ke]),k=Ae[0]??null,_=Ae[1]??null,Me=a.useMemo(()=>{const t=new Map;return v.forEach(r=>{const m=r.period!=null?String(r.period):null;r.id&&t.set(r.id,m),r.displayName&&t.set(r.displayName,m)}),t},[v]),te=a.useMemo(()=>{const t=new Map;return[...X].sort((m,A)=>{const R=m.createdAt?m.createdAt.getTime():0;return(A.createdAt?A.createdAt.getTime():0)-R}).forEach(m=>{if(typeof m.score!="number")return;const A=m.studentId??m.displayName??m.id;if(!A||t.has(A))return;let R=null;m.period!==null&&m.period!==void 0?R=String(m.period):R=Me.get(m.studentId??m.displayName??"")??null,t.set(A,{score:m.score,period:R,testName:m.testName??null})}),t},[X,Me]),M=a.useMemo(()=>Array.from(te.values()).map(t=>t.score),[te]),$e=a.useMemo(()=>c==="all"?M:Array.from(te.values()).filter(t=>t.period===c).map(t=>t.score),[M,te,c]),se=a.useMemo(()=>be(M),[M]),ue=a.useMemo(()=>be($e),[$e]),q=a.useMemo(()=>c==="all"?X:X.filter(t=>String(t.period??"")===c),[X,c]),P=a.useMemo(()=>{const t=Array.from(new Set(q.map(w=>w.testName).filter(w=>!!w)));if(!q.length)return{average:null,topRecord:null,bottomRecord:null,total:0,assessments:t};const r=q.filter(w=>typeof w.score=="number");if(!r.length)return{average:null,topRecord:null,bottomRecord:null,total:q.length,assessments:t};const m=r.map(w=>w.score),A=oe(m),R=r.reduce((w,d)=>w?d.score>(w.score??-1/0)?d:w:d,null),ne=r.reduce((w,d)=>w?d.score<(w.score??1/0)?d:w:d,null);return{average:A,topRecord:R,bottomRecord:ne,total:q.length,assessments:t}},[q]),C=a.useMemo(()=>v.length?v.find(t=>t.id===y)??v[0]:null,[v,y]),z=a.useMemo(()=>{if(!C)return[];const t=N.filter(r=>r.studentId===C.id||!r.studentId&&r.displayName===C.displayName);return f==="combined"?t:t.filter(r=>r.testName===f)},[N,C,f]),G=a.useMemo(()=>{if(!C)return null;const t=z.filter(R=>typeof R.score=="number"),r=t.length?oe(t.map(R=>R.score)):null,m=z[0]??null,A=z.slice(0,3);return{average:r,latest:m,recent:A}},[z,C]),ze=a.useMemo(()=>C?z.length?z.map(t=>typeof t.score=="number"?t.score:null):[C.lastScore??null]:[],[C,z]),ge=a.useMemo(()=>be(ze),[ze]),U=a.useMemo(()=>mt(z),[z]),Y=a.useMemo(()=>C?pt({student:C,history:z,classAverage:P?.average??ee?.averageScore??null,trendDelta:U,groupInsights:Ne,pedagogy:Ce??null}):null,[C,z,P?.average,ee?.averageScore,U,Ne,Ce]),Ge=a.useMemo(()=>[...z].reverse().map((t,r)=>({label:t.testName??`Entry ${r+1}`,value:typeof t.score=="number"?t.score:null})),[z]),Be=a.useMemo(()=>{const t=[];if(se){const r=h==="combined"?"All classes ¬∑ all tests":`${h}`;t.push({id:"all",title:r,subtitle:`Latest data across ${se.totalLearners} learners`,summary:se})}if(ue){const r=c==="all";t.push({id:"class",title:r?"Class overview":`Period ${c}`,subtitle:r?"Combined view of every active class":`Focused on learners rostered in period ${c}`,summary:ue})}return C&&ge&&t.push({id:"student",title:C.displayName,subtitle:"Individual trajectory",summary:ge,latestScore:typeof C.lastScore=="number"?C.lastScore:void 0,latestAssessment:C.lastAssessment??void 0,trendDelta:U??void 0}),t},[se,ue,c,C,h,ge,U]),Re=a.useMemo(()=>!k||!_||k.averageScore==null||_.averageScore==null?null:k.averageScore-_.averageScore,[k,_]),re=a.useMemo(()=>k?.studentCount!=null?k.studentCount:M.length,[M.length,k?.studentCount]),me=a.useMemo(()=>k?.maxScore!=null?k.maxScore:M.length?Math.max(...M):null,[M,k]),pe=a.useMemo(()=>k?.minScore!=null?k.minScore:M.length?Math.min(...M):null,[M,k]),he=a.useMemo(()=>k?.averageScore!=null?k.averageScore:oe(M),[M,k]),He=a.useMemo(()=>{const t=[];return t.push({id:"average-score",label:h==="combined"?"Latest average (all tests)":`${h} average`,value:he??0,displayValue:T(he),delta:K(Re)}),t.push({id:"learner-count",label:"Learners represented",value:re??0,displayValue:re?re.toLocaleString():"N/A",delta:k?.studentCount!=null&&_?.studentCount!=null?K(k.studentCount-_.studentCount):void 0}),t.push({id:"highest-score",label:"Peak score",value:me??0,displayValue:T(me)}),t.push({id:"lowest-score",label:"Floor score",value:pe??0,displayValue:T(pe)}),l.filter(r=>!["average-score","learner-count","highest-score","lowest-score"].includes(r.id)).forEach(r=>t.push(r)),t},[he,me,re,pe,_?.studentCount,l,h,Re,k?.studentCount]),fe=a.useMemo(()=>o==="all"?I:I.filter(t=>String(t.period??"")===o),[I,o]),xe=a.useMemo(()=>[...I].filter(t=>t.averageScore!=null).sort((t,r)=>{const m=t.updatedAt?t.updatedAt.getTime():0,A=r.updatedAt?r.updatedAt.getTime():0;return m-A}).map((t,r)=>({label:t.testName||`Assessment ${r+1}`,value:t.averageScore??null})),[I]),Te=a.useMemo(()=>[...fe].filter(t=>t.averageScore!=null).sort((t,r)=>{const m=t.updatedAt?t.updatedAt.getTime():0,A=r.updatedAt?r.updatedAt.getTime():0;return m-A}).map((t,r)=>({label:t.testName||`Assessment ${r+1}`,value:t.averageScore??null})),[fe]),Oe=a.useMemo(()=>{const t=xe.map(r=>r.value).filter(r=>r!=null);return oe(t)},[xe]);a.useEffect(()=>{if(!s){i([]),x([]),S([]);return}const t=de(H,`users/${s.uid}/dashboard_stats/metrics`),r=ye(t,w=>{const d=w.data()||{},L=[];if(typeof d.totalEnrollment=="number"&&L.push({id:"enrollment",label:"Learners scored",value:d.totalEnrollment}),typeof d.aiGroupCount=="number"||typeof d.rosterGroupCount=="number"||typeof d.groupCount=="number"){const $=typeof d.aiGroupCount=="number"?d.aiGroupCount:typeof d.rosterGroupCount=="number"?d.rosterGroupCount:d.groupCount;L.push({id:"groups",label:"Active groups",value:$??0,delta:K(typeof d.aiGroupDelta=="number"?d.aiGroupDelta:typeof d.rosterGroupDelta=="number"?d.rosterGroupDelta:typeof d.groupDelta=="number"?d.groupDelta:null)})}typeof d.onTrack=="number"&&L.push({id:"on-track",label:"On track",value:d.onTrack??0,delta:K(typeof d.onTrackDelta=="number"?d.onTrackDelta:null)}),typeof d.atRisk=="number"&&L.push({id:"at-risk",label:"Needs support",value:d.atRisk??0,delta:K(typeof d.atRiskDelta=="number"?d.atRiskDelta:null)}),i(L)}),m=ve(je(H,`users/${s.uid}/assignments`),De("dueDate","asc")),A=ye(m,w=>{const d=[];w.forEach(L=>{const $=L.data();d.push({id:L.id,title:$.title??"N/A",dueDate:$.dueDate,status:$.status??"draft"})}),x(d.slice(0,6))}),R=ve(je(H,`users/${s.uid}/assessments_summary`),De("updatedAt","desc")),ne=ye(R,w=>{const d=[];w.forEach(L=>{const $=L.data();d.push({id:L.id,testName:$.testName??"N/A",period:$.period,quarter:$.quarter,studentCount:$.studentCount,averageScore:$.averageScore,maxScore:$.maxScore,minScore:$.minScore,updatedAt:$.updatedAt?.toDate?.()??null})}),S(d)});return()=>{r(),A(),ne()}},[s]);const Ve=a.useCallback(async()=>{s&&await Pe(s.uid)},[s]),qe=a.useCallback(async()=>{s&&await Promise.all([Fe(s.uid),we(s.uid)])},[s]),Ue=a.useCallback(async()=>{s&&await _e(s.uid)},[s]),Ye=a.useCallback(async()=>{s&&await we(s.uid)},[s]),Qe=a.useCallback(async()=>{s&&await Ee(s.uid)},[s]),Ke=a.useCallback(async()=>{s&&await bt(s.uid)},[s]);if(n)return e.jsx("div",{className:"glass-card",children:"Loading your workspace‚Ä¶"});if(!s)return e.jsxs("div",{className:"glass-card fade-in",children:[e.jsx("h2",{style:{fontSize:28,margin:"0 0 12px",fontWeight:800},children:"Authenticate to launch Synapse"}),e.jsx("p",{style:{color:"var(--text-muted)",maxWidth:520},children:"Sign in with your Google Workspace educator account to unlock roster uploads, Gemini-powered grouping, and live mastery analytics."})]});const ae=t=>t==="combined"?"All tests ¬∑ combined":t,Ze=J.length?J:v;return e.jsxs("div",{className:"fade-in",style:{display:"grid",gap:28},children:[e.jsx(it,{}),e.jsxs("section",{style:{display:"grid",gap:28},children:[e.jsxs("div",{className:"glass-card",style:{display:"grid",gap:18,padding:24},children:[e.jsxs("header",{style:{display:"grid",gap:6},children:[e.jsx("h2",{style:{margin:0,fontSize:24,fontWeight:700},children:"Dial in the view you need"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)",maxWidth:600},children:"Choose an assessment, class period, and learner spotlight once ‚Äî every section below responds in sync so you can focus on coaching instead of chasing filters."})]}),e.jsxs("div",{style:{display:"grid",gap:16,gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))"},children:[e.jsxs("div",{className:"glass-subcard",style:{borderRadius:16,padding:16,border:"1px solid rgba(148,163,184,0.25)",background:"rgba(15,23,42,0.55)",display:"grid",gap:8},children:[e.jsx("label",{htmlFor:"dashboard-test-filter",style:{fontWeight:600,fontSize:13},children:"Assessment lens"}),e.jsx("select",{id:"dashboard-test-filter",value:h,onChange:t=>j(t.target.value),className:"table-input",children:V.map(t=>e.jsx("option",{value:t,children:ae(t)},t))})]}),e.jsxs("div",{className:"glass-subcard",style:{borderRadius:16,padding:16,border:"1px solid rgba(148,163,184,0.25)",background:"rgba(15,23,42,0.55)",display:"grid",gap:8},children:[e.jsx("label",{htmlFor:"dashboard-period-filter",style:{fontWeight:600,fontSize:13},children:"Class period"}),e.jsxs("select",{id:"dashboard-period-filter",value:c,onChange:t=>b(t.target.value),className:"table-input",children:[e.jsx("option",{value:"all",children:"All classes"}),F.map(t=>e.jsx("option",{value:t.value,children:`Period ${t.value}${t.hasData?"":" ¬∑ no data yet"}`},t.value))]})]}),e.jsxs("div",{className:"glass-subcard",style:{borderRadius:16,padding:16,border:"1px solid rgba(148,163,184,0.25)",background:"rgba(15,23,42,0.55)",display:"grid",gap:8},children:[e.jsx("label",{htmlFor:"dashboard-explorer-test",style:{fontWeight:600,fontSize:13},children:"Learner evidence"}),e.jsx("select",{id:"dashboard-explorer-test",value:f,onChange:t=>D(t.target.value),className:"table-input",children:V.map(t=>e.jsx("option",{value:t,children:ae(t)},t))})]}),e.jsxs("div",{className:"glass-subcard",style:{borderRadius:16,padding:16,border:"1px solid rgba(99,102,241,0.32)",background:"linear-gradient(135deg, rgba(99,102,241,0.24), rgba(14,165,233,0.14))",display:"grid",gap:8},children:[e.jsx("label",{htmlFor:"dashboard-student-select",style:{fontWeight:600,fontSize:13},children:"Spotlight learner"}),e.jsx("select",{id:"dashboard-student-select",value:y,onChange:t=>W(t.target.value),className:"table-input",children:Ze.map(t=>e.jsx("option",{value:t.id,children:t.displayName},t.id))})]})]})]}),e.jsxs("section",{id:E.stats,className:"glass-card",style:{display:"grid",gap:24},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:16},children:[e.jsxs("div",{style:{maxWidth:520,display:"grid",gap:6},children:[e.jsx("h2",{style:{margin:0,fontSize:26,fontWeight:800},children:"Performance snapshot"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Key averages, highs, and lows update instantly as you toggle filters. Use the clear button to reset metrics or print the full panel for PLC notes."})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx(Q,{label:"Clear metrics",onClear:Ve}),e.jsx(B,{targetId:E.stats,label:"Print overview"})]})]}),e.jsxs("div",{style:{display:"grid",gap:20,gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))"},children:[e.jsx("div",{className:"glass-subcard",style:{padding:18,borderRadius:18,border:"1px solid rgba(148,163,184,0.35)",background:"rgba(15,23,42,0.6)"},children:e.jsx(lt,{cards:He})}),e.jsx(gt,{scopes:Be,sectionId:E.mastery,variant:"embedded",headerExtras:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,flexWrap:"wrap"},children:[e.jsx("span",{className:"tag",style:{background:"rgba(148,163,184,0.15)",border:"1px solid rgba(148,163,184,0.35)"},children:ae(h)}),e.jsx(Q,{label:"Clear mastery",onClear:qe})]}),printLabel:"Print mastery cards"})]})]}),e.jsxs("section",{id:E.explorer,className:"glass-card",style:{display:"grid",gap:24},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:16},children:[e.jsxs("div",{style:{maxWidth:560,display:"grid",gap:6},children:[e.jsx("h2",{style:{margin:0,fontSize:26,fontWeight:800},children:"Classroom coaching studio"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Zoom into the filtered class to see standout scores, growth trends, and a friendly AI coaching note for your spotlight learner."})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx(Q,{label:"Clear explorer",onClear:Ue}),e.jsx(B,{targetId:E.explorer,label:"Print coaching studio"})]})]}),e.jsxs("div",{style:{display:"grid",gap:20,gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))"},children:[e.jsxs("div",{className:"glass-subcard",style:{padding:22,borderRadius:20,border:"1px solid rgba(148,163,184,0.32)",background:"rgba(15,23,42,0.62)",display:"grid",gap:14},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[e.jsx("strong",{style:{fontSize:18},children:"Class pulse"}),e.jsx("span",{className:"tag",style:{background:"rgba(148,163,184,0.2)",border:"1px solid rgba(148,163,184,0.32)"},children:c==="all"?"All classes":`Period ${c}`})]}),e.jsxs("div",{style:{display:"flex",gap:18,flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:30,fontWeight:700},children:T(P.average)}),e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)"},children:"Average proficiency"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:22,fontWeight:600},children:P.total}),e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)"},children:"Assessments scored"})]})]}),e.jsxs("div",{style:{display:"grid",gap:8,color:"var(--text-muted)",fontSize:13},children:[e.jsxs("span",{children:["Bright spot:"," ",P.topRecord?`${P.topRecord.displayName} ¬∑ ${T(P.topRecord.score??null)}`:"N/A"]}),e.jsxs("span",{children:["Next support:"," ",P.bottomRecord?`${P.bottomRecord.displayName} ¬∑ ${T(P.bottomRecord.score??null)}`:"N/A"]})]}),e.jsxs("div",{className:"glass-subcard",style:{padding:14,borderRadius:16,border:"1px solid rgba(148,163,184,0.28)",background:"rgba(15,23,42,0.5)",display:"grid",gap:8},children:[e.jsx("strong",{style:{fontSize:13,color:"var(--text-muted)"},children:"Growth across tests"}),e.jsx(le,{data:Te,stroke:"rgba(129,140,248,0.9)",fill:"rgba(129,140,248,0.22)"})]})]}),C&&G&&e.jsxs("div",{className:"glass-subcard",style:{padding:22,borderRadius:20,border:"1px solid rgba(99,102,241,0.32)",background:"linear-gradient(135deg, rgba(99,102,241,0.28), rgba(14,165,233,0.16))",display:"grid",gap:16},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("strong",{style:{fontSize:18},children:C.displayName}),e.jsxs("p",{style:{margin:"4px 0 0",color:"var(--text-muted)",fontSize:13},children:["Focused on ",ae(f)]})]}),U!=null&&e.jsxs("span",{className:"tag",style:{background:"rgba(15,23,42,0.45)",border:"1px solid rgba(255,255,255,0.2)"},children:[K(U)??"‚Äî"," trend"]})]}),e.jsxs("div",{style:{display:"flex",gap:18,flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:28,fontWeight:700},children:T(G.average)}),e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)"},children:"Average score"})]}),G.latest&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:22,fontWeight:600},children:T(G.latest.score??null)}),e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)"},children:G.latest.testName??"Most recent evidence"})]})]}),e.jsx(le,{data:Ge,stroke:"rgba(244,114,182,0.9)",fill:"rgba(244,114,182,0.22)"}),G.recent.length>0&&e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsx("strong",{style:{fontSize:13},children:"Recent checkpoints"}),e.jsx("ul",{style:{margin:"0 0 0 16px",padding:0,display:"grid",gap:4,color:"var(--text-muted)"},children:G.recent.map((t,r)=>e.jsxs("li",{children:[t.testName??"Assessment"," ¬∑ ",T(t.score??null)]},r))})]}),Y&&e.jsxs("div",{className:"glass-subcard",style:{padding:16,borderRadius:16,border:"1px solid rgba(255,255,255,0.18)",background:"rgba(15,23,42,0.55)",display:"grid",gap:10},children:[e.jsx("strong",{style:{fontSize:15},children:"Friendly coaching tip"}),e.jsx("p",{style:{margin:0,color:"rgba(226,232,240,0.92)",lineHeight:1.6},children:Y.headline}),Y.highlights.length>0&&e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsx("span",{style:{fontSize:12,color:"var(--text-muted)"},children:"What we just noticed"}),e.jsx("ul",{style:{margin:"0 0 0 16px",padding:0,display:"grid",gap:4,color:"var(--text-muted)",listStyle:"disc"},children:Y.highlights.map((t,r)=>e.jsx("li",{children:t},r))})]}),Y.recommendations.length>0&&e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsx("span",{style:{fontSize:12,color:"var(--text-muted)"},children:"Coach next"}),e.jsx("ul",{style:{margin:"0 0 0 16px",padding:0,display:"grid",gap:4,color:"var(--text-muted)",listStyle:"disc"},children:Y.recommendations.map((t,r)=>e.jsx("li",{children:t},r))})]})]})]})]})]}),e.jsxs("section",{id:E.assessmentHistory,className:"glass-card",style:{display:"grid",gap:24},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:16},children:[e.jsxs("div",{style:{maxWidth:520,display:"grid",gap:6},children:[e.jsx("h2",{style:{margin:0,fontSize:26,fontWeight:800},children:"Assessment timeline"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Review how each test landed across classes. Filter by period to zoom in, or keep the combined lens to monitor full grade-level momentum."})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx("label",{htmlFor:"assessment-period-filter",style:{fontSize:13,color:"var(--text-muted)"},children:"Period focus"}),e.jsxs("select",{id:"assessment-period-filter",value:o,onChange:t=>u(t.target.value),className:"table-input",style:{minWidth:160},children:[e.jsx("option",{value:"all",children:"All classes"}),F.map(t=>e.jsx("option",{value:t.value,children:`Period ${t.value}`},t.value))]}),e.jsx(Q,{label:"Clear history",onClear:Ye}),e.jsx(B,{targetId:E.assessmentHistory,label:"Print timeline"})]})]}),e.jsxs("div",{style:{display:"grid",gap:20,gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))"},children:[e.jsxs("div",{className:"glass-subcard",style:{padding:18,borderRadius:18,border:"1px solid rgba(148,163,184,0.3)",background:"rgba(15,23,42,0.55)",display:"grid",gap:6},children:[e.jsx("span",{style:{fontSize:12,letterSpacing:"0.08em",textTransform:"uppercase",color:"var(--text-muted)"},children:"All classes average across tests"}),e.jsx("strong",{style:{fontSize:30},children:T(Oe)})]}),e.jsxs("div",{className:"glass-subcard",style:{padding:18,borderRadius:18,border:"1px solid rgba(148,163,184,0.3)",background:"rgba(15,23,42,0.55)"},children:[e.jsx("strong",{style:{fontSize:14,color:"var(--text-muted)"},children:"Combined trend"}),e.jsx(le,{data:xe,stroke:"rgba(45,212,191,0.9)",fill:"rgba(45,212,191,0.22)"})]}),e.jsxs("div",{className:"glass-subcard",style:{padding:18,borderRadius:18,border:"1px solid rgba(148,163,184,0.3)",background:"rgba(15,23,42,0.55)"},children:[e.jsx("strong",{style:{fontSize:14,color:"var(--text-muted)"},children:o==="all"?"Period comparison":`Period ${o} trend`}),e.jsx(le,{data:Te,stroke:"rgba(129,140,248,0.9)",fill:"rgba(129,140,248,0.25)"})]})]}),e.jsx("div",{className:"glass-subcard",style:{padding:0,borderRadius:18,border:"1px solid rgba(148,163,184,0.25)",overflow:"hidden"},children:e.jsxs("table",{className:"table",style:{margin:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Assessment"}),e.jsx("th",{children:"Period"}),e.jsx("th",{children:"Avg"}),e.jsx("th",{children:"High"}),e.jsx("th",{children:"Low"}),e.jsx("th",{children:"Updated"})]})}),e.jsx("tbody",{children:fe.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.testName}),e.jsx("td",{children:t.period??"All"}),e.jsx("td",{children:T(t.averageScore??null)}),e.jsx("td",{children:T(t.maxScore??null)}),e.jsx("td",{children:T(t.minScore??null)}),e.jsx("td",{children:t.updatedAt?t.updatedAt.toLocaleString():"N/A"})]},t.id))})]})})]}),e.jsxs("section",{id:E.assignments,className:"glass-card",style:{display:"grid",gap:24},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:16},children:[e.jsxs("div",{style:{maxWidth:520,display:"grid",gap:6},children:[e.jsx("h2",{style:{margin:0,fontSize:26,fontWeight:800},children:"Assignment planner"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Capture reteach plans, celebrations, and extensions tied to your latest mastery data. Print a snapshot before class or PLC time."})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx(Q,{label:"Clear assignments",onClear:Qe}),e.jsx(B,{targetId:E.assignments,label:"Print assignment planner"})]})]}),g.length===0?e.jsx("div",{className:"empty-state",style:{marginTop:4},children:"Create differentiated assignments from any standard to monitor mastery progress here."}):e.jsx("div",{className:"glass-subcard",style:{padding:0,borderRadius:18,border:"1px solid rgba(148,163,184,0.25)",overflow:"hidden"},children:e.jsxs("table",{className:"table",style:{margin:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Assignment"}),e.jsx("th",{children:"Due date"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:g.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.title}),e.jsx("td",{children:t.dueDate?new Date(t.dueDate).toLocaleDateString():"No due date"}),e.jsx("td",{style:{textTransform:"capitalize"},children:t.status})]},t.id))})]})})]})]}),e.jsxs("div",{style:{display:"grid",justifyItems:"center",gap:12},children:[e.jsx(Q,{label:"Master clear workspace",onClear:Ke,tone:"danger"}),e.jsx("p",{style:{fontSize:12,color:"var(--text-muted)",textAlign:"center",maxWidth:360},children:"Master clear removes dashboard metrics, assessments, students, assignments, and cached insights for this account. Use with care."})]})]})}export{wt as default};
