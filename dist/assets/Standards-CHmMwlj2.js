import{r as d,j as e}from"./index-BhJrdxT9.js";import{c as C}from"./catalog-hwBwqGgt.js";import{s as w}from"./safeFetch-Baq5aVnp.js";import"./firebase-BZTKtPSO.js";function k({user:x}){const c=d.useMemo(()=>C.subjects,[]),[n,v]=d.useState(""),[l,f]=d.useState(""),[o,u]=d.useState([]),[r,g]=d.useState(null),[m,S]=d.useState("target vocabulary development and conceptual understanding"),[i,N]=d.useState(null),[j,y]=d.useState(!1),[b,h]=d.useState(null);d.useEffect(()=>{if(!n||!l){u([]),g(null);return}const a=c.find(t=>t.id===n)?.grades?.[l]?.standards??[];u(a),g(t=>a.some(p=>p.code===t?.code)?t:null)},[n,l,c]);async function T(){if(!x||!r||!n||!l){h("Sign in and complete the subject, grade, and standard selections first.");return}y(!0),h(null);try{const s=await w("/.netlify/functions/generateAssignment",{method:"POST",body:JSON.stringify({standardCode:r.code,standardName:r.name,focus:m,subject:c.find(a=>a.id===n)?.label??n,grade:l,assessmentType:"reading_plus",questionCount:5,includeRemediation:!0})});N(s)}catch(s){console.error(s),h(s?.message??"Gemini lesson generation failed.")}finally{y(!1)}}return x?e.jsxs("div",{className:"fade-in",style:{display:"grid",gap:24},children:[e.jsxs("section",{className:"glass-card",children:[e.jsx("div",{className:"badge",children:"Standards library"}),e.jsx("h2",{style:{margin:"12px 0 6px",fontSize:28,fontWeight:800},children:"Browse standards by subject and grade"}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"Pick a subject, choose the grade, then select the standard you want to target."}),e.jsxs("div",{style:{display:"grid",gap:16,marginTop:18},children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:"standards-subject",children:"Subject"}),e.jsxs("select",{id:"standards-subject",name:"standards-subject",value:n,onChange:s=>v(s.target.value),children:[e.jsx("option",{value:"",children:"Select a subject"}),c.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))]})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:"standards-grade",children:"Grade level"}),e.jsxs("select",{id:"standards-grade",name:"standards-grade",value:l,onChange:s=>f(s.target.value),disabled:!n,children:[e.jsx("option",{value:"",children:"Select grade 6, 7, or 8"}),["6","7","8"].map(s=>e.jsxs("option",{value:s,children:["Grade ",s]},s))]})]})]}),o.length>0?e.jsxs("div",{style:{display:"grid",gap:12,marginTop:18},children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:"standards-code",children:"Standard"}),e.jsxs("select",{id:"standards-code",name:"standards-code",value:r?.code??"",onChange:s=>{const a=o.find(t=>t.code===s.target.value)??null;g(a)},children:[e.jsx("option",{value:"",children:"Select a standard"}),o.map(s=>e.jsxs("option",{value:s.code,children:[s.code," — ",s.name]},s.code))]})]}),r&&e.jsxs("div",{className:"glass-subcard",style:{border:"1px solid rgba(148,163,184,0.25)",borderRadius:18,padding:18,background:"rgba(15,23,42,0.55)"},children:[e.jsx("strong",{children:r.code}),e.jsx("p",{style:{margin:"8px 0 0",color:"var(--text-muted)"},children:r.name})]})]}):e.jsx("div",{className:"empty-state",style:{marginTop:18},children:"Choose a subject and grade to load standards."})]}),e.jsxs("section",{className:"glass-card",style:{display:"grid",gap:18},children:[e.jsx("h3",{style:{margin:0,fontSize:24,fontWeight:700},children:"Differentiated lesson brief"}),e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:"standard-focus",children:"Instructional focus"}),e.jsx("input",{id:"standard-focus",name:"standard-focus",value:m,onChange:s=>S(s.target.value),placeholder:"e.g., connect to career pathways"})]}),e.jsx("button",{className:"primary",onClick:T,disabled:j,children:j?"Generating blueprint…":"Generate AI blueprint"}),b&&e.jsx("div",{style:{color:"#fecaca"},children:b}),i&&e.jsxs("div",{style:{display:"grid",gap:18},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"AI overview"}),e.jsxs("h4",{style:{margin:"10px 0 0",fontSize:20},children:[i.standardCode," · ",i.assessmentType.replace(/_/g," ")]}),e.jsx("p",{style:{color:"var(--text-muted)"},children:i.aiInsights.overview})]}),e.jsxs("div",{className:"glass-subcard",style:{border:"1px solid rgba(148,163,184,0.25)",borderRadius:18,padding:18,background:"rgba(15,23,42,0.55)"},children:[e.jsx("strong",{children:"Class strategies"}),e.jsx("ul",{style:{margin:"8px 0 0 18px"},children:i.aiInsights.classStrategies.map((s,a)=>e.jsx("li",{children:s},a))}),e.jsx("strong",{style:{display:"block",marginTop:12},children:"Next steps"}),e.jsx("ul",{style:{margin:"8px 0 0 18px"},children:i.aiInsights.nextSteps.map((s,a)=>e.jsx("li",{children:s},a))})]}),i.levels.map(s=>e.jsxs("article",{style:{border:"1px solid rgba(148,163,184,0.2)",borderRadius:18,padding:18,background:"rgba(15,23,42,0.6)"},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("h5",{style:{margin:0,fontSize:18},children:s.level}),e.jsx("p",{style:{color:"var(--text-muted)",marginTop:4},children:s.description})]}),e.jsx("span",{className:"tag",children:"Differentiated"})]}),e.jsx("div",{style:{marginTop:12,display:"grid",gap:12},children:s.questions.map(a=>e.jsxs("div",{style:{border:"1px solid rgba(99,102,241,0.25)",borderRadius:12,padding:12},children:[e.jsx("strong",{children:"Prompt:"}),e.jsx("p",{style:{margin:"8px 0",color:"var(--text-muted)"},children:a.prompt}),a.options&&e.jsx("ol",{style:{margin:"0 0 0 18px"},children:a.options.map((t,p)=>e.jsx("li",{children:t},p))}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx("strong",{children:"Answer:"})," ",a.answer]}),e.jsxs("div",{style:{marginTop:4,color:"var(--text-muted)"},children:["Why: ",a.rationale]})]},a.id))}),s.remediation.length>0&&e.jsxs("div",{style:{marginTop:12},children:[e.jsx("strong",{children:"Remediation ideas"}),e.jsx("ul",{style:{margin:"8px 0 0 18px"},children:s.remediation.map((a,t)=>e.jsx("li",{children:a},t))})]})]},s.level))]})]})]}):e.jsxs("div",{className:"glass-card fade-in",children:[e.jsx("h2",{style:{margin:0,fontSize:26,fontWeight:800},children:"Authenticate to generate lessons"}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"Your selections are processed securely via Netlify Functions with Gemini."})]})}export{k as default};
