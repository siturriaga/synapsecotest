import{r as a,u as be,j as e,a as je,d as Q}from"./index-CMByewRX.js";import{h as ve,j as K,q as se,k as re,m as ne}from"./firebase-ON2ZZD8i.js";const Y=[{id:"sunrise",gradient:"linear-gradient(140deg, rgba(254,215,170,0.35), rgba(129,140,248,0.2))",caption:"Line up your goals while the day is fresh ‚Äî Gemini is ready to draft supports.",greeting:"Good morning",icon:"üåÖ",iconColor:"#fbbf24"},{id:"day",gradient:"linear-gradient(140deg, rgba(14,165,233,0.28), rgba(59,130,246,0.24))",caption:"Midday momentum keeps every learner on track with just-in-time insights.",greeting:"Good afternoon",icon:"‚òÄÔ∏è",iconColor:"#fde68a"},{id:"sunset",gradient:"linear-gradient(140deg, rgba(249,115,22,0.28), rgba(168,85,247,0.24))",caption:"Capture wins, gaps, and reassignment needs before the sun goes down.",greeting:"Good evening",icon:"üåá",iconColor:"#fb923c"},{id:"night",gradient:"linear-gradient(160deg, rgba(15,118,110,0.28), rgba(99,102,241,0.28))",caption:"Night mode engaged ‚Äî prep tomorrow‚Äôs breakthroughs with calm clarity.",greeting:"Good night",icon:"üåô",iconColor:"#a5b4fc"}];function Se(s){const n=s.getHours();return n<10?Y[0]:n<16?Y[1]:n<20?Y[2]:Y[3]}function Ne(s){return(s.getHours()*60+s.getMinutes()+s.getSeconds()/60)/1440*360}function we(){const[s,n]=a.useState(()=>new Date),{displayName:c}=be();a.useEffect(()=>{const f=window.setInterval(()=>{n(new Date)},1e3);return()=>window.clearInterval(f)},[]);const r=a.useMemo(()=>Se(s),[s]),o=a.useMemo(()=>{const f=Ne(s),b=s.getSeconds()/60;return f+Math.sin(b*2*Math.PI)*6},[s]),h=a.useMemo(()=>({"--welcome-rotation":`${o}deg`}),[o]),g=a.useMemo(()=>new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"2-digit"}).format(s),[s]),y=a.useMemo(()=>new Intl.DateTimeFormat(void 0,{weekday:"long",month:"long",day:"numeric"}).format(s),[s]);return e.jsxs("section",{className:`glass-card dynamic-welcome ${r.id}`,style:{marginBottom:28,backgroundImage:r.gradient,position:"sticky",top:32,zIndex:5},children:[e.jsxs("div",{className:`welcome-orb ${r.id}`,"aria-hidden":!0,style:h,children:[e.jsx("div",{className:"welcome-orb__glow"}),e.jsx("div",{className:"welcome-orb__core"}),e.jsx("div",{className:"welcome-orb__trail"}),e.jsx("div",{className:"welcome-orb__celestial",style:{color:r.iconColor},children:e.jsx("span",{children:r.icon})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Dynamic welcome"}),e.jsxs("h1",{style:{fontSize:34,margin:"12px 0 6px",fontWeight:800},children:[r.greeting,c?`, ${c}`:", educator","."]}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:16,maxWidth:520},children:r.caption}),e.jsxs("div",{style:{display:"flex",gap:14,marginTop:16,alignItems:"center",color:"rgba(226,232,240,0.8)"},children:[e.jsx("span",{style:{fontSize:18,fontWeight:700},children:g}),e.jsx("span",{style:{opacity:.7},children:y})]})]})]})}const me=[{background:"linear-gradient(135deg, rgba(99,102,241,0.65), rgba(168,85,247,0.55))",border:"rgba(129, 140, 248, 0.75)",accent:"rgba(226, 232, 240, 0.82)"},{background:"linear-gradient(135deg, rgba(56,189,248,0.65), rgba(14,165,233,0.55))",border:"rgba(56, 189, 248, 0.75)",accent:"rgba(240, 249, 255, 0.9)"},{background:"linear-gradient(135deg, rgba(244,114,182,0.65), rgba(251,191,36,0.6))",border:"rgba(244, 114, 182, 0.75)",accent:"rgba(255, 241, 230, 0.92)"},{background:"linear-gradient(135deg, rgba(45,212,191,0.65), rgba(34,197,94,0.6))",border:"rgba(45, 212, 191, 0.75)",accent:"rgba(240, 253, 244, 0.9)"}];function Ae({cards:s}){return e.jsx("div",{className:"card-grid card-grid-4",children:s.map((n,c)=>{const r=me[c%me.length];return e.jsxs("article",{className:"glass-card fade-in",style:{background:r.background,borderColor:r.border,color:r.accent,boxShadow:"0 24px 60px rgba(15, 23, 42, 0.32)"},children:[e.jsx("div",{style:{fontSize:13,letterSpacing:"0.08em",textTransform:"uppercase",opacity:.9},children:n.label}),e.jsx("div",{style:{fontSize:40,fontWeight:900,marginTop:12},children:n.displayValue??n.value}),n.delta&&e.jsx("div",{className:"tag",style:{marginTop:10,background:"rgba(15, 23, 42, 0.25)",border:"1px solid rgba(255,255,255,0.22)"},children:n.delta})]},n.id)})})}function ke(s,n){if(typeof window>"u")return;const c=document.getElementById(s);if(!c){window.print();return}const r=window.open("","_blank","noopener,noreferrer,width=900,height=650");if(!r){window.print();return}const o=c.cloneNode(!0),h=Array.from(document.head.querySelectorAll('style, link[rel="stylesheet"]')).map(f=>f.outerHTML).join(`
`),g=Object.entries(document.body.dataset).map(([f,b])=>`data-${f}="${b??""}"`).join(" "),y=g?` ${g}`:"";r.document.open(),r.document.write(`<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>${n??document.title}</title>
${h}
<style>
  @media print {
    body { margin: 24px; }
  }
</style>
</head>
<body${y}>
<div class="print-container">${o.outerHTML}</div>
</body>
</html>`),r.document.close(),r.focus(),r.print(),r.close()}function R({targetId:s,label:n="Print section",title:c}){const r=a.useCallback(()=>{ke(s,c)},[s,c]);return e.jsxs("button",{type:"button",onClick:r,className:"print-button","aria-label":n,title:n,children:[e.jsx("span",{className:"print-button__icon","aria-hidden":"true",children:"üñ®Ô∏è"}),e.jsx("span",{className:"print-button__label",children:"Print"})]})}const Ce=[{id:"approaching",label:"Approaching",description:"Below 50% ‚Äî intensive reteach needed",color:"#fda4af",background:"linear-gradient(90deg, rgba(248, 113, 113, 0.38), rgba(244, 114, 182, 0.28))"},{id:"developing",label:"Developing",description:"50-69% ‚Äî targeted scaffolds",color:"#fcd34d",background:"linear-gradient(90deg, rgba(251, 191, 36, 0.38), rgba(250, 204, 21, 0.22))"},{id:"onGrade",label:"On Grade",description:"70-89% ‚Äî on grade level",color:"#4ade80",background:"linear-gradient(90deg, rgba(74, 222, 128, 0.38), rgba(16, 185, 129, 0.26))"},{id:"mastered",label:"Mastered",description:"90%+ ‚Äî enrichment ready",color:"#60a5fa",background:"linear-gradient(90deg, rgba(96, 165, 250, 0.38), rgba(129, 140, 248, 0.26))"}];function pe(s,n){return n?Math.round(s/n*100):0}function $e(s){if(s===null||Number.isNaN(s))return"N/A";const n=Number(s.toFixed(1));return Number.isInteger(n)?`${Math.round(n)}%`:`${n.toFixed(1)}%`}function Me({scopes:s,sectionId:n="mastery-distribution"}){const c=a.useMemo(()=>s.filter(r=>r.summary),[s]);return c.length?e.jsxs("section",{id:n,className:"glass-card",style:{display:"grid",gap:20},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:16,flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Proficiency distribution"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:"Track mastery momentum"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,maxWidth:460},children:[e.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"These visuals reflect the most recent score for each learner. Missing scores remain flexible ‚Äî they stay in the roster as N/A so uploads never block your workflow."}),e.jsx(R,{targetId:n,label:"Print mastery distribution"})]})]}),e.jsx("div",{style:{display:"grid",gap:18,gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))"},children:c.map(r=>{const{summary:o}=r;if(!o)return null;const h=[],g=pe(o.counts.mastered+o.counts.onGrade,o.scoredLearners),y=o.scoredLearners>0?o.scoredLearners:"N/A",f=o.totalLearners>0?o.totalLearners:"N/A",b=o.scoredLearners>0;if(o.scoredLearners&&(g>=80?h.push("Strong mastery trend ‚Äî celebrate and extend learning!"):g>=60?h.push("Solid footing ‚Äî keep reinforcing core concepts to lift more learners."):h.push("Reinforce foundations ‚Äî focus reteach groups and formative checks.")),r.trendDelta!=null&&!Number.isNaN(r.trendDelta)){const j=r.trendDelta>0?`‚ñ≤${r.trendDelta.toFixed(1)} pts`:`‚ñº${Math.abs(r.trendDelta).toFixed(1)} pts`;h.push(`Latest shift: ${j}`)}return e.jsxs("article",{className:"glass-subcard",style:{border:"1px solid rgba(148,163,184,0.35)",borderRadius:18,padding:20,display:"grid",gap:14,background:"rgba(15,23,42,0.62)"},children:[e.jsxs("header",{style:{display:"grid",gap:4},children:[e.jsx("strong",{style:{fontSize:18},children:r.title}),e.jsx("span",{style:{color:"var(--text-muted)",fontSize:13},children:r.subtitle})]}),e.jsxs("div",{style:{display:"flex",gap:18,alignItems:"baseline",flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:30,fontWeight:700},children:$e(o.average)}),e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)"},children:"Average proficiency"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:24,fontWeight:700},children:y}),e.jsxs("div",{style:{fontSize:13,color:"var(--text-muted)"},children:["Scored / ",f]})]}),r.latestScore!==void 0&&r.latestScore!==null&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:24,fontWeight:700},children:[r.latestScore.toFixed(1),"%"]}),e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)"},children:r.latestAssessment??"Latest score"})]})]}),e.jsx("div",{style:{display:"grid",gap:10},children:Ce.map(j=>{const k=o.counts[j.id],w=pe(k,o.scoredLearners);return e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"var(--text-muted)"},children:[e.jsxs("span",{children:[j.label," ¬∑ ",j.description]}),e.jsx("span",{children:b?e.jsxs(e.Fragment,{children:[k,` ¬∑ ${w}%`]}):"N/A"})]}),e.jsx("div",{style:{height:10,borderRadius:999,background:"rgba(148,163,184,0.16)",overflow:"hidden"},children:e.jsx("div",{style:{width:`${w}%`,height:"100%",transition:"width 320ms ease",background:j.background,boxShadow:`0 0 12px ${j.color}`}})})]},j.id)})}),h.length>0&&e.jsx("p",{style:{margin:0,fontSize:13,color:"rgba(226,232,240,0.78)"},children:h.join(" ")})]},r.id)})})]}):e.jsxs("section",{id:n,className:"glass-card",style:{display:"grid",gap:16},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Proficiency distribution"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:"Mastery data"})]}),e.jsx(R,{targetId:n,label:"Print mastery distribution"})]}),e.jsxs("article",{className:"glass-subcard",style:{border:"1px solid rgba(148,163,184,0.35)",borderRadius:16,padding:18,background:"rgba(15,23,42,0.62)"},children:[e.jsx("strong",{style:{fontSize:18,display:"block",marginBottom:6},children:"Mastery data"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Proficiency metrics are currently N/A. Upload data when you have it, but your workflow stays flexible in the meantime."})]})]})}function ae(s){const n=s.length,c={approaching:0,developing:0,onGrade:0,mastered:0},r=[];s.forEach(g=>{typeof g=="number"&&Number.isFinite(g)&&(r.push(g),g>=90?c.mastered+=1:g>=70?c.onGrade+=1:g>=50?c.developing+=1:c.approaching+=1)});const o=r.length,h=o?r.reduce((g,y)=>g+y,0)/o:null;return{totalLearners:n,scoredLearners:o,average:h,counts:c}}function ze(s){if(!s.length)return null;const n=s.filter(o=>typeof o.score=="number");if(n.length<2)return null;const c=n[0].score,r=n[1].score;return c-r}function he(s){return s.toLowerCase().replace(/\s+/g," ").trim()}function Ie({student:s,history:n,classAverage:c,trendDelta:r,groupInsights:o,pedagogy:h}){if(!s)return null;const g=n[0]??null,y=typeof g?.score=="number"?g.score:s.lastScore,f=g?.testName??s.lastAssessment,b=[];if(typeof y=="number"){const i=y.toFixed(1).replace(/\.0$/,""),I=f?` on ${f}`:"";if(b.push(`${s.displayName} is working at ${i}%${I}.`),typeof c=="number"){const C=y-c,D=C>0?"above":C<0?"below":"right on",v=Math.abs(C).toFixed(1).replace(/\.0$/,"");C!==0?b.push(`That is ${v} pts ${D} the class average of ${c.toFixed(1)}%.`):b.push("That matches the current class average.")}}else b.push(`${s.displayName} does not have a recent scored assessment yet. Capture the next checkpoint to personalise support.`);if(typeof r=="number"&&!Number.isNaN(r)&&r!==0){const i=r>0?`‚ñ≤${r.toFixed(1)} pts momentum`:`‚ñº${Math.abs(r).toFixed(1)} pts dip`;b.push(`Recent trajectory shows ${i} across the last two assessments.`)}const j=[];n.slice(0,3).forEach(i=>{const I=i.createdAt?i.createdAt.toLocaleDateString():"Recent",C=typeof i.score=="number"?`${i.score.toFixed(1).replace(/\.0$/,"")}%`:"N/A",D=i.testName??"Assessment";j.push(`${D} (${I}): ${C}`)}),!j.length&&typeof y=="number"&&j.push(`Latest recorded score: ${y.toFixed(1).replace(/\.0$/,"")}%`);const k=[],w=new Set([s.displayName,...s.nameVariants??[]].map(he)),P=o.find(i=>i.students.some(I=>w.has(he(I.name))));if(P){const i=P.recommendedPractices[0];k.push(`${s.displayName} is in the ${P.label.toLowerCase()} cohort (${P.range}). ${i??"Focus on targeted feedback and collaborative routines."}`)}return h?.bestPractices?.length&&h.bestPractices.slice(0,2).forEach(i=>{k.push(i)}),k.length||k.push("Celebrate strengths during conferences and co-design the next learning target together."),{headline:b.join(" "),highlights:j,recommendations:k}}const De=["1","2","3","4","5","6","7","8"],N={stats:"dashboard-overview",mastery:"mastery-distribution",explorer:"class-student-explorer",latestAssessment:"latest-assessment",assessmentHistory:"assessment-history",pulses:"pulse-updates",assignments:"assignments-radar"};function ie(s){if(typeof s=="string"){const n=s.trim();return n.length?n:void 0}if(typeof s=="number"&&Number.isFinite(s)){const n=s.toLocaleString(void 0,{maximumFractionDigits:1});return s>0?`+${n}`:n}}function We({user:s,loading:n}){const[c,r]=a.useState([]),[o,h]=a.useState([]),[g,y]=a.useState([]),[f,b]=a.useState(null),[j,k]=a.useState([]),{records:w,summaries:P,students:i,insights:I,groupInsights:C,pedagogy:D}=je(),[v,le]=a.useState("all"),[T,J]=a.useState(""),oe=a.useMemo(()=>v==="all"?i:i.filter(t=>String(t.period??"")===v),[i,v]),de=a.useMemo(()=>i.map(t=>t.lastScore),[i]),ce=a.useMemo(()=>oe.map(t=>t.lastScore),[oe]),q=a.useMemo(()=>ae(de),[de]),X=a.useMemo(()=>ae(ce),[ce]);a.useEffect(()=>{!T&&i.length&&J(i[0].id)},[i,T]),a.useEffect(()=>{T&&i.every(t=>t.id!==T)&&J(i[0]?.id??"")},[i,T]);const Z=a.useMemo(()=>{const t=new Set;return w.forEach(d=>{d.period!==null&&d.period!==void 0&&t.add(String(d.period))}),i.forEach(d=>{d.period!==null&&d.period!==void 0&&t.add(String(d.period))}),t},[w,i]),B=a.useMemo(()=>{const t=Array.from(new Set([...De,...Array.from(Z)]));return t.sort((d,z)=>Number(d)-Number(z)),t.map(d=>({value:d,hasData:Z.has(d)}))},[Z]);a.useEffect(()=>{v!=="all"&&(B.some(t=>t.value===v)||le(B[0]?.value??"all"))},[B,v]);const V=j.length?j:P,A=a.useMemo(()=>{if(f)return f;const t=V[0];return t?{testName:t.testName,period:t.period,quarter:t.quarter,studentCount:t.studentCount??void 0,averageScore:t.averageScore,maxScore:t.maxScore,minScore:t.minScore}:null},[f,V]),G=a.useMemo(()=>v==="all"?w:w.filter(t=>String(t.period??"")===v),[w,v]),S=a.useMemo(()=>{const t=Array.from(new Set(G.map(m=>m.testName).filter(m=>!!m)));if(!G.length)return{average:null,topRecord:null,bottomRecord:null,total:0,assessments:t};const d=G.filter(m=>typeof m.score=="number");if(!d.length)return{average:null,topRecord:null,bottomRecord:null,total:G.length,assessments:t};const z=d.map(m=>m.score),_=z.length?z.reduce((m,M)=>m+M,0)/z.length:null,W=d.reduce((m,M)=>m?M.score>(m.score??-1/0)?M:m:M,null),H=d.reduce((m,M)=>m?M.score<(m.score??1/0)?M:m:M,null);return{average:_,topRecord:W,bottomRecord:H,total:G.length,assessments:t}},[G]),u=a.useMemo(()=>i.length?i.find(t=>t.id===T)??i[0]:null,[i,T]),$=a.useMemo(()=>u?w.filter(t=>t.studentId===u.id||!t.studentId&&t.displayName===u.displayName):[],[w,u]),E=a.useMemo(()=>{if(!u)return null;const t=$.filter(W=>typeof W.score=="number"),d=t.length?t.reduce((W,H)=>W+H.score,0)/t.length:null,z=$[0]??null,_=$.slice(0,3);return{average:d,latest:z,recent:_}},[$,u]),ue=a.useMemo(()=>u?$.length?$.map(t=>typeof t.score=="number"?t.score:null):[u.lastScore??null]:[],[u,$]),ee=a.useMemo(()=>ae(ue),[ue]),O=a.useMemo(()=>ze($),[$]),F=a.useMemo(()=>u?Ie({student:u,history:$,classAverage:S?.average??I?.averageScore??null,trendDelta:O,groupInsights:C,pedagogy:D??null}):null,[u,$,S?.average,I?.averageScore,O,C,D]),xe=a.useMemo(()=>{const t=[];if(q&&t.push({id:"all",title:"All classes",subtitle:`Latest data across ${q.totalLearners} learners`,summary:q}),X){const d=v==="all";t.push({id:"class",title:d?"Class overview":`Period ${v}`,subtitle:d?"Combined view of every active class":`Focused on learners rostered in period ${v}`,summary:X})}return u&&ee&&t.push({id:"student",title:u.displayName,subtitle:"Individual trajectory",summary:ee,latestScore:typeof u.lastScore=="number"?u.lastScore:void 0,latestAssessment:u.lastAssessment??void 0,trendDelta:O??void 0}),t},[q,X,v,u,ee,O]);return a.useEffect(()=>{if(!s){r([]),h([]),y([]),k([]),b(null);return}const t=ve(Q,`users/${s.uid}/dashboard_stats/metrics`),d=K(t,L=>{const l=L.data()||{},x=[];if(typeof l.totalEnrollment=="number"&&x.push({id:"enrollment",label:"Learners scored",value:l.totalEnrollment}),l.latestAssessment){const U=l.latestAssessment;b(U);const te=U.averageScore??null;x.push({id:"latest-average",label:"Latest class average",value:te??0,displayValue:te!==null?te.toFixed(1):"N/A"}),typeof U.studentCount=="number"&&x.push({id:"latest-count",label:"Students assessed",value:U.studentCount})}else b(null);const p=typeof l.aiGroupCount=="number"?l.aiGroupCount:null,ye=typeof l.rosterGroupCount=="number"?l.rosterGroupCount:typeof l.groupCount=="number"?l.groupCount:null,fe=typeof l.aiGroupDelta=="number"?l.aiGroupDelta:typeof l.rosterGroupDelta=="number"?l.rosterGroupDelta:typeof l.groupDelta=="number"?l.groupDelta:void 0,ge=p??ye;typeof ge=="number"&&x.push({id:"groups",label:"Active Groups",value:ge,delta:ie(fe)}),typeof l.onTrack=="number"&&x.push({id:"on-track",label:"On Track",value:l.onTrack??0,delta:ie(l.onTrackDelta)}),typeof l.atRisk=="number"&&x.push({id:"at-risk",label:"Needs Support",value:l.atRisk??0,delta:ie(l.atRiskDelta)}),x.length===0&&x.push({id:"placeholder",label:"Data incoming",value:0,displayValue:"N/A"}),r(x)}),z=se(ne(Q,`users/${s.uid}/logs`),re("createdAt","desc")),_=K(z,L=>{const l=[];L.forEach(x=>{const p=x.data();l.push({id:x.id,title:p.title??"Insight",detail:p.detail??p.message??"Gemini generated an insight.",createdAt:p.createdAt?.toDate?.()??null})}),h(l.slice(0,5))}),W=se(ne(Q,`users/${s.uid}/assignments`),re("dueDate","asc")),H=K(W,L=>{const l=[];L.forEach(x=>{const p=x.data();l.push({id:x.id,title:p.title??"N/A",dueDate:p.dueDate,status:p.status??"draft"})}),y(l.slice(0,4))}),m=se(ne(Q,`users/${s.uid}/assessments_summary`),re("updatedAt","desc")),M=K(m,L=>{const l=[];L.forEach(x=>{const p=x.data();l.push({id:x.id,testName:p.testName??"N/A",period:p.period,quarter:p.quarter,studentCount:p.studentCount,averageScore:p.averageScore,maxScore:p.maxScore,minScore:p.minScore,updatedAt:p.updatedAt?.toDate?.()??null})}),k(l.slice(0,3))});return()=>{d(),_(),H(),M()}},[s]),n?e.jsx("div",{className:"glass-card",children:"Loading your workspace‚Ä¶"}):s?e.jsxs("div",{className:"fade-in",children:[e.jsx(we,{}),e.jsxs("section",{style:{display:"grid",gap:28},children:[e.jsxs("section",{id:N.stats,style:{display:"grid",gap:16},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Key metrics"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:"Daily pulse"})]}),e.jsx(R,{targetId:N.stats,label:"Print key metrics"})]}),e.jsx(Ae,{cards:c})]}),e.jsx(Me,{scopes:xe,sectionId:N.mastery}),e.jsxs("section",{id:N.explorer,className:"glass-card",style:{display:"grid",gap:18},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Class & student explorer"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:"Focus on every learner"})]}),e.jsx(R,{targetId:N.explorer,label:"Print class and student explorer"})]}),e.jsxs("div",{style:{display:"grid",gap:18,gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))"},children:[e.jsxs("div",{className:"glass-subcard",style:{padding:18,borderRadius:18,border:"1px solid rgba(148,163,184,0.35)",background:"rgba(15,23,42,0.62)",display:"grid",gap:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{display:"grid",gap:4},children:[e.jsx("label",{htmlFor:"dashboard-period-filter",style:{fontWeight:600},children:"View all classes or focus on a period"}),e.jsx("span",{style:{color:"var(--text-muted)",fontSize:12},children:"Choose a period (1‚Äì8) to filter class metrics. Periods without data show ‚ÄúN/A‚Äù until uploads arrive."})]}),e.jsxs("select",{id:"dashboard-period-filter",name:"dashboard-period-filter",value:v,onChange:t=>le(t.target.value),className:"table-input",style:{maxWidth:160},children:[e.jsx("option",{value:"all",children:"View all classes"}),B.map(t=>e.jsx("option",{value:t.value,children:`Period ${t.value}${t.hasData?"":" (no data yet)"}`},t.value))]})]}),S?e.jsxs("div",{style:{display:"grid",gap:10,fontSize:14},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:13},children:"Students"}),e.jsx("div",{style:{fontSize:24,fontWeight:700},children:S.total>0?S.total:"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:13},children:"Average"}),e.jsx("div",{style:{fontSize:22,fontWeight:700},children:S.average!==null?S.average.toFixed(1):"N/A"})]}),S.topRecord&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:13},children:"Top performer"}),e.jsxs("div",{style:{marginTop:4},children:[S.topRecord.displayName," ¬∑ ",S.topRecord.score??"N/A"]})]}),S.bottomRecord&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:13},children:"Needs support"}),e.jsxs("div",{style:{marginTop:4},children:[S.bottomRecord.displayName," ¬∑ ",S.bottomRecord.score??"N/A"]})]}),S.assessments.length>0&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:13},children:"Assessments"}),e.jsx("div",{style:{marginTop:4},children:S.assessments.join(", ")})]}),C.length>0&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:13},children:"Groups"}),e.jsx("ul",{style:{margin:"6px 0 0 16px",padding:0,display:"grid",gap:4,color:"var(--text-muted)",listStyle:"disc"},children:C.slice(0,3).map(t=>e.jsxs("li",{children:[t.label,": ",t.range]},t.id))})]}),D?.summary&&e.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:13},children:D.summary})]}):e.jsx("p",{style:{color:"var(--text-muted)",fontSize:14,margin:"4px 0 0"},children:"Upload roster data to populate class metrics."})]}),e.jsxs("div",{className:"glass-subcard",style:{padding:18,borderRadius:18,border:"1px solid rgba(148,163,184,0.35)",background:"rgba(15,23,42,0.62)",display:"grid",gap:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[e.jsx("strong",{children:"Student focus"}),e.jsx("select",{value:T,onChange:t=>J(t.target.value),className:"table-input",style:{maxWidth:200},children:i.map(t=>e.jsx("option",{value:t.id,children:t.displayName},t.id))})]}),u?e.jsxs("div",{style:{display:"grid",gap:10,fontSize:14},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:13},children:"Latest score"}),e.jsxs("div",{style:{marginTop:4},children:[u.lastScore!==null&&u.lastScore!==void 0?u.lastScore:"N/A",u.lastAssessment&&` ¬∑ ${u.lastAssessment}`]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:13},children:"Average"}),e.jsx("div",{style:{marginTop:4},children:E?.average!==null&&E?.average!==void 0?E.average.toFixed(1):"N/A"})]}),u.periodHistory&&u.periodHistory.length>0&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:13},children:"Period history"}),e.jsx("div",{style:{marginTop:4},children:Array.from(new Set(u.periodHistory.filter(t=>t!=null))).join(", ")})]}),E?.recent.length?e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:13},children:"Recent mastery"}),e.jsx("ul",{style:{margin:"6px 0 0 16px",padding:0,display:"grid",gap:4,color:"var(--text-muted)",listStyle:"disc"},children:E.recent.map(t=>e.jsxs("li",{children:[t.testName??"N/A"," ¬∑ ",t.score??"N/A"]},t.id))})]}):null]}):e.jsx("p",{style:{color:"var(--text-muted)",fontSize:14,margin:"4px 0 0"},children:"Upload roster data to view individual trends."})]}),F&&e.jsxs("div",{className:"glass-subcard",style:{padding:18,borderRadius:18,border:"1px solid rgba(99,102,241,0.35)",background:"linear-gradient(135deg, rgba(99,102,241,0.32), rgba(14,165,233,0.22))",display:"grid",gap:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[e.jsx("strong",{children:"AI insight"}),e.jsx("span",{className:"tag",style:{background:"rgba(15,23,42,0.45)",border:"1px solid rgba(255,255,255,0.2)"},children:"Gemini brief"})]}),e.jsx("p",{style:{margin:0,color:"rgba(226,232,240,0.92)",lineHeight:1.5},children:F.headline}),F.highlights.length>0&&e.jsxs("div",{children:[e.jsx("strong",{style:{fontSize:13},children:"Recent evidence"}),e.jsx("ul",{style:{margin:"8px 0 0 16px",padding:0,display:"grid",gap:4,color:"var(--text-muted)",listStyle:"disc"},children:F.highlights.map((t,d)=>e.jsx("li",{children:t},d))})]}),F.recommendations.length>0&&e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsx("strong",{style:{fontSize:13},children:"Next steps"}),e.jsx("ul",{style:{margin:"4px 0 0 16px",padding:0,display:"grid",gap:4,color:"var(--text-muted)",listStyle:"disc"},children:F.recommendations.map((t,d)=>e.jsx("li",{children:t},d))})]})]})]})]}),A&&e.jsxs("section",{id:N.latestAssessment,className:"glass-card",children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Latest mastery upload"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:A.testName})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[A.period&&A.quarter&&e.jsxs("span",{className:"tag",children:["Period ",A.period," ¬∑ ",A.quarter]}),e.jsx(R,{targetId:N.latestAssessment,label:"Print latest mastery upload"})]})]}),e.jsx("div",{style:{display:"grid",gap:12,marginTop:18},children:e.jsxs("div",{style:{display:"flex",gap:18,flexWrap:"wrap"},children:[e.jsxs("div",{className:"glass-subcard",style:{padding:16,borderRadius:16,border:"1px solid rgba(148,163,184,0.35)",background:"rgba(15,23,42,0.62)"},children:[e.jsx("strong",{children:"Average"}),e.jsx("div",{style:{fontSize:26,fontWeight:700,marginTop:6},children:A.averageScore!==null&&A.averageScore!==void 0?A.averageScore.toFixed(1):"N/A"})]}),e.jsxs("div",{className:"glass-subcard",style:{padding:16,borderRadius:16,border:"1px solid rgba(148,163,184,0.35)",background:"rgba(15,23,42,0.62)"},children:[e.jsx("strong",{children:"Range"}),e.jsxs("div",{style:{marginTop:6},children:["High ",A.maxScore??"N/A"," ¬∑ Low ",A.minScore??"N/A"]})]}),e.jsxs("div",{className:"glass-subcard",style:{padding:16,borderRadius:16,border:"1px solid rgba(148,163,184,0.35)",background:"rgba(15,23,42,0.62)"},children:[e.jsx("strong",{children:"Learners"}),e.jsx("div",{style:{fontSize:26,fontWeight:700,marginTop:6},children:A.studentCount??"N/A"})]})]})})]}),V.length>0&&e.jsxs("section",{id:N.assessmentHistory,className:"glass-card",children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Assessment history"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:"Recent uploads"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("a",{href:"/assignments",style:{color:"var(--accent)",fontWeight:600},children:"Design follow-ups ‚Üí"}),e.jsx(R,{targetId:N.assessmentHistory,label:"Print assessment history"})]})]}),e.jsxs("table",{className:"table",style:{marginTop:18},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Assessment"}),e.jsx("th",{children:"Period"}),e.jsx("th",{children:"Quarter"}),e.jsx("th",{children:"Avg"}),e.jsx("th",{children:"High"}),e.jsx("th",{children:"Low"}),e.jsx("th",{children:"Updated"})]})}),e.jsx("tbody",{children:V.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.testName}),e.jsx("td",{children:t.period??"N/A"}),e.jsx("td",{children:t.quarter??"N/A"}),e.jsx("td",{children:t.averageScore!==null&&t.averageScore!==void 0?t.averageScore.toFixed(1):"N/A"}),e.jsx("td",{children:t.maxScore??"N/A"}),e.jsx("td",{children:t.minScore??"N/A"}),e.jsx("td",{children:t.updatedAt?t.updatedAt.toLocaleString():"N/A"})]},t.id))})]})]}),e.jsxs("section",{id:N.pulses,className:"glass-card",children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Live oversight"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:"Pulse updates"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("a",{href:"/groups",style:{color:"var(--accent)",fontWeight:600},children:"Review groups ‚Üí"}),e.jsx(R,{targetId:N.pulses,label:"Print pulse updates"})]})]}),o.length===0?e.jsx("div",{className:"empty-state",style:{marginTop:18},children:"No Gemini actions logged yet. Generate student groups or lessons to see reflective insights here."}):e.jsx("ul",{style:{listStyle:"none",padding:0,marginTop:22,display:"grid",gap:16},children:o.map(t=>e.jsxs("li",{style:{border:"1px solid rgba(148,163,184,0.32)",borderRadius:14,padding:16},children:[e.jsx("div",{style:{fontWeight:600},children:t.title}),e.jsx("div",{style:{color:"var(--text-muted)",marginTop:4},children:t.detail}),t.createdAt&&e.jsx("div",{style:{fontSize:12,marginTop:10,color:"rgba(148,163,184,0.7)"},children:t.createdAt.toLocaleString()})]},t.id))})]}),e.jsxs("section",{id:N.assignments,className:"glass-card",children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"badge",children:"Upcoming"}),e.jsx("h3",{style:{margin:"12px 0 0",fontSize:24,fontWeight:700},children:"Assignments radar"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("a",{href:"/assignments",style:{color:"var(--accent)",fontWeight:600},children:"Manage assignments ‚Üí"}),e.jsx(R,{targetId:N.assignments,label:"Print assignments radar"})]})]}),g.length===0?e.jsx("div",{className:"empty-state",style:{marginTop:18},children:"Create differentiated assignments from any standard to monitor mastery progress here."}):e.jsxs("table",{className:"table",style:{marginTop:18},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Assignment"}),e.jsx("th",{children:"Due date"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:g.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.title}),e.jsx("td",{children:t.dueDate?new Date(t.dueDate).toLocaleDateString():"No due date"}),e.jsx("td",{style:{textTransform:"capitalize"},children:t.status})]},t.id))})]})]})]})]}):e.jsxs("div",{className:"glass-card fade-in",children:[e.jsx("h2",{style:{fontSize:28,margin:"0 0 12px",fontWeight:800},children:"Authenticate to launch Synapse"}),e.jsx("p",{style:{color:"var(--text-muted)",maxWidth:520},children:"Sign in with your Google Workspace educator account to unlock roster uploads, Gemini-powered grouping, and live mastery analytics."})]})}export{We as default};
